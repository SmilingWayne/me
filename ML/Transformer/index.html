
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="笑笑的个人网站">
      
      
        <meta name="author" content="SmilingWayne">
      
      
        <link rel="canonical" href="https://github.com/SmlingWayne/me/ML/Transformer/">
      
      
        <link rel="prev" href="../DL/LSTM/">
      
      
        <link rel="next" href="../Transformer_2/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Transformer｜架构 - 笑笑的站</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M22%2012a10%2010%200%200%201-10%2010A10%2010%200%200%201%202%2012%2010%2010%200%200%201%2012%202a10%2010%200%200%201%2010%2010M6%2013h8l-3.5%203.5%201.42%201.42L17.84%2012l-5.92-5.92L10.5%207.5%2014%2011H6z%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/katex.min.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-NVXC1ZHJ8C"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-NVXC1ZHJ8C",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-NVXC1ZHJ8C",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#transformer" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="笑笑的站" class="md-header__button md-logo" aria-label="笑笑的站" data-md-component="logo">
      
  <img src="../../images/Favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            笑笑的站
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Transformer｜架构
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SmilingWayne/me" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SmilingWayne/me
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  ˗ˋˏᰔᩚˎˊ˗

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Philosophy/" class="md-tabs__link">
          
  
  
    
  
  哲学

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Literature/" class="md-tabs__link">
          
  
  
    
  
  文学

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../History/" class="md-tabs__link">
          
  
  
    
  
  历史

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Arts/" class="md-tabs__link">
          
  
  
    
  
  艺术

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../yan/" class="md-tabs__link">
          
  
  
    
  
  考研

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../OROpt/" class="md-tabs__link">
          
  
  
    
  
  运筹与优化

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  人工智能

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Study/" class="md-tabs__link">
          
  
  
    
  
  学习笔记

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Talks/" class="md-tabs__link">
          
  
  
    
  
  我的碎碎念

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Website/" class="md-tabs__link">
          
  
  
    
  
  关于网站

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="笑笑的站" class="md-nav__button md-logo" aria-label="笑笑的站" data-md-component="logo">
      
  <img src="../../images/Favicon.png" alt="logo">

    </a>
    笑笑的站
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SmilingWayne/me" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SmilingWayne/me
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ˗ˋˏᰔᩚˎˊ˗
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Philosophy/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    哲学
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            哲学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Dict/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    哲学词典
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    文本研究
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            文本研究
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Society_of_spectacles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    景观社会
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Sisyphus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    西西弗神话
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Philosophers/Bourdieu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    布尔迪厄
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Discours_linegalite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    论人类不平等的起源与基础
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    福柯相关
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            福柯相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Principles_and_punish/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    规训与惩罚
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Philosophers/Foucault/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    福柯
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Foucault/Foucault_collections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    福柯集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Foucault/Foucault_talks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    福柯访谈
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Foucault/Discours/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    话语
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Foucault/Pouvoir/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    权力
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Foucault/Prison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    监狱
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Foucault/Verite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    真理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Foucault/Genealogie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    谱系学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Foucault/Problematiser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    问题化
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    意识形态
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            意识形态
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Mao/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    不怎么精美的毛选摘
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基础知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Marxism_religion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    马克思主义宗教观研究
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Color_revolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    苏联解体与颜色革命
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Farseer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    先知三部曲
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Guerrilla_warfare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    论游击战
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Li_da_zhao/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    李大钊文集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Atheism_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中国无神论史纲
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    宗教哲学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            宗教哲学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Christian/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基督教
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Golden_legend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    金色传说
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/World_religion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    世界宗教
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Jews/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    犹太人与犹太教(牛津通识读本)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Book_of_resemblance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    相似之书
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Religion_culture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    我理解的伊斯兰教
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    政治哲学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            政治哲学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/ThePrince/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    君主论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Government/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    论政府
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Politics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    政治学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Theology_politics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    政治神学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/State_and_revolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    国家与革命
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Anti_intellectual_usa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    美国生活中的反智主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Collision_civilization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文明的冲突与世界秩序的重建
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/The_suffers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    全世界受苦的人
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Postcolonialism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    后殖民主义与世界格局(牛津通识读本)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Boundary_politics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    政治的历史与边界
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Legacy_berlin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    以赛亚伯林的遗产
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Liberty_and_betray/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    自由及其背叛
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Gihad_civilization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    圣战与文明
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Verse_violence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    良知对抗暴力
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Leisure_class/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    有闲阶级论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Diplomacy_us/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    世界大国外交(US)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    女性主义
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            女性主义
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Women_social_power_sys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    女性与社会权力系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Women_literature_arts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    女性与文学艺术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Sexuality_freud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    👩🏻‍⚖️性学三论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Sexuality_existence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    👩‍🎓性存在
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Sacred_joy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    👩🏻‍💻神圣的欢爱
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Indefense_of_feminism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🙅‍♀️为女权辩护
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Politics_feminism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    政治学与女性主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Feminism_brief_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    女权主义简史(牛津通识读本)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    美学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            美学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Voyage_of_beauty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    美的历程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Root_of_romanticism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    浪漫主义的根源
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/About_beauty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    谈美
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Phi_and_aesthic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    哲学美学
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    人类学/社会学/法学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            人类学/社会学/法学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Society_of_fatigue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    倦怠社会
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Rural_china/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    乡土中国
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Ancient_society/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    古代社会
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/About_crimes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    论犯罪与刑罚
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Primal_format_of_religion_life/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    宗教生活的初级形式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Voyagers_western_pacific_ocean/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    西太平洋上的航海者
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    其他
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            其他
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Principles_of_sci_mgm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    科学管理原理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Japan_philosophers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    日本思想小史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Phi_and_sea/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    哲思与海——一部诗意的哲学随笔
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Pragmatism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实用主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/World_of_aristotle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    亚里士多德的世界(牛津通识读本)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/How_to_read/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    如何阅读一本书
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Thoughts_in_our_time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    我们时代的社会思考与阅读主张
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Philosophers/Altusser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    阿尔都塞
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Philosophers/Marcuse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    马尔库塞
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Philosophers/RolandBarthes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    罗兰巴特
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Philosophy/Philosophers/Derrida/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    德里达
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Literature/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    文学
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            文学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Poems/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    诗歌
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            诗歌
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    外国诗
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            外国诗
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Anger_and_mystery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷愤怒与神秘
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Fleurs_du_mal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷恶之花
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Shochu_and_love/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷烧酒与爱情
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Song_of_Lauren/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷罗兰之歌
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Lamartine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷致艾尔薇拉
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/About_Fleurs_du_mal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    论《恶之花》
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Divine_comedy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇮🇹神曲
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Paradise_lost/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧失乐园
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Canterbery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧坎特伯雷故事集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Yesenin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇷🇺是你在歌唱？是我在遐想
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Mayakovsky/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇷🇺穿裤子的云：马雅可夫斯基诗选
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Luzitania/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇵🇹卢济塔尼亚人之歌
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Jerusalem_liberation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇮🇹耶路撒冷的解放
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Poems_de_life_hope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇳🇮生命与希望之歌
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Illiad/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇷伊利亚特
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Odyssey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇷奥德赛
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Gibran/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇱🇧纪伯伦诗选
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/German_winter_fairytale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇩🇪德国，一个冬天的童话
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/To_descendant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇩🇪致后代
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Death_fuge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇩🇪死亡赋格
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/If_I_can_make_heart_unbroken/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    世界抒情诗选
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Emily/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸我用古典的方式爱过你
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Collections_of_doubt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    疑问集
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
        
          
          <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    中国诗
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_3">
            <span class="md-nav__icon md-icon"></span>
            中国诗
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Xinqiji_ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    辛弃疾词
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Muxin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    木心诗选
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Hua_jian_ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    花间集新注
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/Moonlight_left_hand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    月光停在左手上
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/ClassicChinese_shi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中国古典-诗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/ClassicChinese_ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中国古典-词
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Poems/ClassicChinese_qu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中国古典-曲
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Plays/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    戏剧
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            戏剧
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_3_2" id="__nav_3_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    戏剧
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_2">
            <span class="md-nav__icon md-icon"></span>
            戏剧
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Faust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    💖浮士德
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Hiroshima/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷广岛之恋
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Caligula/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷卡利古拉
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Loves_labors_lost/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧爱的徒劳
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Othello/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧奥赛罗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Macbeth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧麦克白
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Hamlet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    💝哈姆雷特
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/HenryIV/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧亨利四世
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Richard_II/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧理查二世
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Storms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧暴风雨
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Mid_summer_nights_dream/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧仲夏夜之梦
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Seagull/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇷🇺海鸥
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Media/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇷美狄亚
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Mu_dan_ting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳牡丹亭
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Tao_hua_shan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳桃花扇
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Swords_hamlet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳铸剑·哈姆雷特
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Romeo_juliet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧罗密欧与朱丽叶
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3_3" id="__nav_3_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    影视
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_3">
            <span class="md-nav__icon md-icon"></span>
            影视
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Seppuku/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵切腹
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Cloud_atlas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸云图
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Munich/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸慕尼黑
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Gravity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸地心引力
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Exhausted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷精疲力尽
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Cleo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷五至七时的克莱奥
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/La_chinioise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳中国姑娘
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Elephant_sitting_still/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳大象席地而坐
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Jingwu_yingxiong/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳精武英雄
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/A_journey_to_the_west/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳宇宙探索编辑部
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Werk_ohne_autor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇩🇪无主之作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Air_crash_investigation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇦空中浩劫
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Plays/Inside_no_9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧九号秘事
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Literature/Essay/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    随笔
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            随笔
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Less_than_one/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    小于一
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Second_hand_time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    二手时间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Book_of_questions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    问题之书
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Chongshen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    冲绳札记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Remember_memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    记忆记忆
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Memory_fire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    火的记忆
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Nostalgia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    怀旧的未来
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Life_food/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    人间食粮
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Shan_he_jia_sha/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    山河袈裟
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Cowshed_memo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    牛棚杂忆
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Nature_and_life/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    自然与人生
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_13" >
        
          
          <label class="md-nav__link" for="__nav_3_4_13" id="__nav_3_4_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    单读系列
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_13">
            <span class="md-nav__icon md-icon"></span>
            单读系列
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Dan_du_12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    单读14
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Dan_du_14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    单读14
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Dan_du_16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    单读16
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Dan_du_17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    单读17
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Bath_house/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    澡堂与片场
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Memory_thoughts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    往事与随想
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Give_you_a_bullet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    送你一颗子弹
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Literature_knowledge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中国文学常识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Countryside_of_one/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一个人的村庄
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Borges/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    博尔赫斯谈话录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Stay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    别走，万一好笑呢
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/That_night_paris/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    那天夜里，我看见了巴黎
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Reading_shelter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    阅读是一座随身携带的避难所
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Essay/Zen_motor_maintanence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    禅与摩托车维修艺术
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Literature/Literacy/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    文论
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            文论
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Xuan_xue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    魏晋玄学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_classic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    西方正典
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Zeng_guang_xian_wen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    增广贤文
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Camus_script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷加缪手记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Verlain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷魏尔伦
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Paris_review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷巴黎评论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/French_literature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷法语文学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Writers_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧作家笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Dynasty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    天朝遥远
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Literature_memo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文学回忆录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Womens_index_finger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    女人的食指
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Power_of_words/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文字的力量
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Japan_literature_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    日本文学史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Japan_literature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    日本文学札记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Silent_most/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    沉默的大多数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/To_young_poets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    给青年诗人的信
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/British_literature_sea/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    英国文学中的海洋
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Prust_gaze/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    普鲁斯特的凝视
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_20" >
        
          
          <label class="md-nav__link" for="__nav_3_5_20" id="__nav_3_5_20_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    西方人文主义精神
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_20">
            <span class="md-nav__icon md-icon"></span>
            西方人文主义精神
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/afterClassReading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    课后阅读材料总结与摘录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/RussianFormalism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    人文主义和俄国形式主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/NewCriticism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    新批评学派的主张与对新批评学派的批评
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/Structralism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    结构主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/Questions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    问题回答
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/BakhtinianLiteraryCriticism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    巴赫金文学批评
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/NewHistorism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    新历史主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/CulturalCriticism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文化批评
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/Psycho/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    精神分析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/Deconstruction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    解构主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/Postmodernism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    后现代主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/Postcolonialism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    后殖民主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Western_humanist/GenderAndBody/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    身体和性别
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Formation_critical_thinking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    批判性思维的形成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Naive_novlist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    天真的和感伤的小说家
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Romanticism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    浪漫主义(牛津通识读本)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Literacy/Latin_america_literature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    拉丁美洲文学(牛津通识读本)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Literature/Novel/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    小说
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            小说
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Frog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳蛙
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Zhao_wen_dao/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳朝闻道
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Forever_fatigue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳生死疲劳
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Feng_ru_fei_tun/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳丰乳肥臀
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Common_world/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳平凡的世界
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Submarine_at_night/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳夜晚的潜水艇
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Xu_san_guan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳许三观卖血记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Fang_si_qi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳房思琪的初恋乐园
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Red_roses_white_roses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇳红玫瑰与白玫瑰
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Snow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵雪国
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Kyoto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵古都
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Lust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵欲望
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Chaosao/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵潮骚
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Spring_snow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵春雪
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Benma/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵奔马
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Xiaosi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵晓寺
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Tianrenwushuai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵天人五衰
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Death_of_summer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵仲夏之死
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Jinge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵金阁寺
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Rashomon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵罗生门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Dance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵舞！舞！舞！
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Tale_of_Genji/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵源氏物语(ToDo)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Galactic_railroad/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵银河铁道之夜
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/World_end/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵世界尽头与冷酷仙境
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Plague/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷鼠疫
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Giants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷巨人传
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Letters_from_persian/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷波斯人信札
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Lecume_des_jours/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷流年的飞沫
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Samarkhan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷撒马尔罕
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Madam_Bovary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷包法利夫人
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Three_riflers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷三个火枪手
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Les_liaisons_dangereuses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷危险的关系
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Stories_of_two_cities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧双城记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Veil/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧面纱
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Journey_to_India/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧印度之行
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/1984/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧《1984》
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Lady_Chatterley/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧查泰莱夫人的情人
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Silent_patient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧沉默的病人
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Gulliver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧格列佛游记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Pandemic_era/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧瘟疫年纪事
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Tess/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧德伯家的苔丝
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Oriental_express/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧东方快车谋杀案
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Tragedy_niro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧尼罗河上的惨案
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Charline_84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇧查令十字街84号
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/100_years_solitude/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇨🇴百年孤独
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Wild_palm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸野棕榈
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Sympathatic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸同情者
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Fahrenheit_451/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸华氏451
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Slaughterhouse_five/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸五号屠场
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Snow_falls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸雪落香杉树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Davinci_code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸达芬奇密码
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Catcher_in_the_rye/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸麦田里的守望者
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Gatsby/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸了不起的盖茨比
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Detective/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    侦探小说
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Greek/Myth_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    希腊神话合集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Labyrinth_pan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    潘神的迷宫
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Leaves_dress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇦🇺树叶裙
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Ensaio_sobre_a_cegueira/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇵🇹失明症漫记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Novel/Kara_Mazov_brothers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇷🇺卡拉马佐夫兄弟
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Literature/Corpus/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    语料库
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            语料库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Corpus/Metaphor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    修辞、文字与形象化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Literature/Corpus/Phi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    诡辩、哲思与抽象化
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../History/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    历史
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            历史
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    笔记本
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            笔记本
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Stories_and_death/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    历史故事与死亡
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Greece/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇬🇷希腊笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Culture_revo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    十年历史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Japan_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵日本笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Africa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇲🇱非洲笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Mid_asia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇰🇿中亚笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Soviet_union/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇷🇺苏联笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Europe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    欧罗巴笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Isabella/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇪🇸卡斯蒂利亚的伊莎贝拉
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Mid_east/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🕌中东笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/France_1572_1789/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷法兰西笔记｜1572~1789
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/France_1789_1794/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷法兰西笔记｜1789~1794
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/France_1794_1871/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷法兰西笔记｜1794~1871
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/France_1871_now/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷法兰西笔记｜1871~Now
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Arabians/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇸🇦阿拉伯笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/India/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇮🇳印度笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Cruciata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    十字军简史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Netherland_colony/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇳🇱荷兰东印度公司笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Indonesia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇮🇩印度尼西亚笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    书
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            书
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Field_of_memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷记忆之场
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Mediterranean_15_18C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷15至18世纪的物质文明、经济和资本主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Great_conquest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    大征服
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Alhambra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇪🇸阿尔罕布拉
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Zhanguo_qitu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    战国歧途
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Lempire_des_steppes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    草原帝国
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Ridiculous_medics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    荒诞医学史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Roman_empire_brief_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    罗马帝国简史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Rome_military_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    古罗马帝国军事史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Econo_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    世界史就是经济史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Destroy_western_india/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    西印度毁灭述略
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Marie_antoinette/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    断头王后
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/US/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇸崛起的前夜
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Human_stars/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    人类的群星闪耀时
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Arabian_islamic_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    阿拉伯伊斯兰文化史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Bourgeoisie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷法国资产阶级史(上)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/King_leopolds_ghost/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇧🇪利奥波德国王的鬼魂
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Century_of_intellects_in_France/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷法国知识分子的世纪
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Latin_american_blood/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇺🇾拉丁美洲被切开的血管
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Rise_and_fall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇷🇺一个大国的崛起与崩溃
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Modern_japan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇯🇵现代日本(牛津通识读本)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/Eastern_wind/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷东风——法国知识分子与60年代的遗产
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Arts/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    艺术
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            艺术
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    艺术与设计史
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            艺术与设计史
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Art_and_design/Notes1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷欧洲艺术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Art_and_design/Impressionism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    印象派
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Art_and_design/Meso_America/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇲🇽中美洲艺术
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    归档
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Pre_Raphael/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷拉斐尔前派的梦
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Butterfly_at_night/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷黑夜的蝴蝶
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Left_bank/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷左岸,从人民阵线到冷战作家
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Delacroix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇫🇷艺术引导人生——德拉克洛瓦私人日记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Blue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    色彩列传：蓝色
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Art_history_unfashioned/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    非主流艺术史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Dada_surrealism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    达达和超现实主义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Beethoven/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    贝多芬的骰子
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Arts_of_love/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    爱的艺术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Stories_of_art/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    艺术的故事
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Art_renaissance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文艺复兴时期的艺术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/Modernism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    现代主义
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Arts/20_century_artists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🇪🇺20世纪西方艺术家
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../yan/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    考研
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            考研
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yan/yanPlans/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    我的规划
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yan/yanBooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    我的用书
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yan/yanHabits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    我的细节
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yan/yanTalks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    闲聊
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../OROpt/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    运筹与优化
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            运筹与优化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    给进组研一er的Brief
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../OROpt/OR/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    运筹学基础
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            运筹学基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/ORExercise/Works/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    运筹学刷题本
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性规划、单纯形法（plus pro max版）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter1_plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    灵敏度分析（太敏感了）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    对偶理论及对偶单纯形法（一种哲学）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter3_ext1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性规划对偶的解题向写法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    运输问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter3_ext2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    多目标规划
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter3_plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据包络分析与扩展
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    整数规划、求解算法和指派问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    非线性规划、凸规划理论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter5_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    最优化基础（锥锥们觉得很赞）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    动态规划
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图论算法:最短路问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter7_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图论算法:最小费用流与推广
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter7_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图论算法:最大流与最小割
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter7_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图论算法:极大团与独立集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter7_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图论算法:二分图与匹配问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter7_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图论建模:多商品网络流
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    排队论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    仓储论（EOQ模型和它的一万个分身）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    博弈论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/MAPF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    多智能体寻路(MAPF)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    算法｜列生成方法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/DWDcmp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    算法｜DW分解
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/LR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    算法｜拉格朗日松弛
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/BranchAndPrice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    算法｜分支定价-CSP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/ExactVRP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    算法｜分支定价-VRP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/TOP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    路径规划｜TOP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/TSP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    路径规划｜TSP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/VRP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    路径规划｜VRP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/PDP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    路径规划｜PDP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/SAA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    不确定性｜SAA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/LotSizingProblem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    生产｜批量生产 (LSP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/JSP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    调度｜车间调度 (JSP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/UnitCommitmentProblem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    调度｜发电机组调度(UCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/Interview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    其他｜理论知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/GraphPartition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图划分问题｜GP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/FAP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    航班分配｜FAP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/CrewSch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    机组排班｜CAP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/VRPmeetsNeurIPS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    当组合优化遇到深度学习
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OROpt/OR/GeneralTechnique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    常见的0-1变量处理技巧
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    人工智能
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            人工智能
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    机器学习基础
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            机器学习基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/Perceptron/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    感知机
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/MLP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    多层感知机
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/Bias_Variance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bias｜Variance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/AUC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ROC｜AUC｜PR｜F1 等指标
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/KNN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    K近邻算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/NaiveBayesian/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    朴素贝叶斯｜分类器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/Regression/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性回归｜多元
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/LR_complex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性回归推导｜复杂度
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/LogisReg_complex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    逻辑回归推导｜正则化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/SVD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    从SVD到PCA｜复杂度
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/t-SNE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    t-SNE｜数据降维
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/Kmeans/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    K-means｜聚类算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/DecisionTree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tree｜决策树模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/RandomForest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bagging｜随机森林
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/AdaBoost/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Boosting｜Adaboost
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/GBDT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Boosting｜GBDT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/XGBoost/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Boosting｜XGBoost
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/SVM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    支持向量机推导｜复杂度
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/GLM_ANOVA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    广义线性模型｜方差分析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StatLearnMethod/PageRank/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PageRank算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PracticalML/Notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实用机器学习：笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    推荐系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            推荐系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RecmdSys/Lecture1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lecture｜01
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4" id="__nav_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    深度学习入门
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4">
            <span class="md-nav__icon md-icon"></span>
            深度学习入门
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DL/CNN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    卷积神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DL/RNN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    循环神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DL/LSTM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DL｜LSTM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Transformer｜架构
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Transformer｜架构
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#embedding" class="md-nav__link">
    <span class="md-ellipsis">
      Embedding
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#positional-embedding" class="md-nav__link">
    <span class="md-ellipsis">
      Positional Embedding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Positional Embedding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sinusoidal-positional-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Sinusoidal Positional Encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roperotary-positional-embedding" class="md-nav__link">
    <span class="md-ellipsis">
      RoPE:Rotary Positional Embedding
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#layernorm" class="md-nav__link">
    <span class="md-ellipsis">
      LayerNorm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LayerNorm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-not-batch-norm" class="md-nav__link">
    <span class="md-ellipsis">
      Why not Batch Norm?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-norm-cv" class="md-nav__link">
    <span class="md-ellipsis">
      Batch Norm: CV (🤔)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feed-forward-network-ffn" class="md-nav__link">
    <span class="md-ellipsis">
      Feed Forward Network (FFN)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-head-attention-mha" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-Head Attention (MHA)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Head Attention (MHA)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#functionality-what-for" class="md-nav__link">
    <span class="md-ellipsis">
      Functionality / What for?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-multi-head" class="md-nav__link">
    <span class="md-ellipsis">
      Why Multi-Head?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#softmax-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Softmax: usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cross-self-attention" class="md-nav__link">
    <span class="md-ellipsis">
      Cross / Self-Attention
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cross / Self-Attention">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mechanism-of-cross-attention" class="md-nav__link">
    <span class="md-ellipsis">
      Mechanism of Cross Attention
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-cross-attention-for-decoder-only" class="md-nav__link">
    <span class="md-ellipsis">
      NO Cross Attention for Decoder-Only!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#masked-self-attention-why-masked" class="md-nav__link">
    <span class="md-ellipsis">
      Masked Self Attention (Why masked?)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-prevent-gradient-loss" class="md-nav__link">
    <span class="md-ellipsis">
      How to prevent Gradient Loss? (🤔)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adam-optmz-features" class="md-nav__link">
    <span class="md-ellipsis">
      Adam Optmz: Features (🤔)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adam Optmz: Features (🤔)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      面试精炼版回答
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-prevent-overfitting" class="md-nav__link">
    <span class="md-ellipsis">
      How to prevent Overfitting?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to prevent Overfitting?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tiny-conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Tiny Conclusion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-qs-during-interview" class="md-nav__link">
    <span class="md-ellipsis">
      Other Qs during interview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other Qs during interview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-decoder-only-not-encoder-decoder" class="md-nav__link">
    <span class="md-ellipsis">
      Why Decoder-only, not Encoder-Decoder?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moe-mixture-of-experts" class="md-nav__link">
    <span class="md-ellipsis">
      MoE (Mixture of Experts)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MoE (Mixture of Experts)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#load-balancing-loss" class="md-nav__link">
    <span class="md-ellipsis">
      解决方案：负载均衡损失 (Load Balancing Loss)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Transformer_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transformer｜深入
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ResNet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResNet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Bert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bert
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LLM_app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SFT｜RLHF｜RAG｜LoRA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GPT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ActFun/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    激活函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Attention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    注意力机制及拓展
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ML_code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Study/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    学习笔记
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            学习笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    组会与相关学术内容
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            组会与相关学术内容
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TeamMeeting/0920/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    202309至202401
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TeamMeeting/0922Fri/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    系统建模与优化｜20230922
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TeamMeeting/Articles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20240122报告
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TeamMeeting/0308Prep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0308TeamMeeting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TeamMeeting/0315Prep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0315TeamMeeting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TeamMeeting/0322Prep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0322TeamMeeting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TeamMeeting/0329Prep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024年综合运输系统运营管理学术研讨会
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/xhs_list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    小红书｜资源分享外链
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Study/TextEdit/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    小红书｜文本编辑
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_4" id="__nav_9_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_4">
            <span class="md-nav__icon md-icon"></span>
            小红书｜文本编辑
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4_2" >
        
          
          <label class="md-nav__link" for="__nav_9_4_2" id="__nav_9_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LaTeX
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_4_2">
            <span class="md-nav__icon md-icon"></span>
            LaTeX
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/LaTeX/pieces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    入门知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/LaTeX/LatexNotes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LaTeX｜1-零零碎碎
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/LaTeX/SetTheory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LaTeX｜2-集合相关
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/LaTeX/Matrix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LaTeX｜3-矩阵多行对齐
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/LaTeX/Overleaf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LaTeX｜4-Overleaf论文写作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/LaTeX/WordLaTeX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LaTeX｜5-公式识别工具推荐
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4_3" >
        
          
          <label class="md-nav__link" for="__nav_9_4_3" id="__nav_9_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Markdown
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_4_3">
            <span class="md-nav__icon md-icon"></span>
            Markdown
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/Markdown/MarkdownQuickStart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🌟 快速入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/Markdown/MarkdownSyntax2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    色样表合集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/Markdown/MarkdownSyntax1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    常用的语法(with plugins)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/Markdown/Markdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    我的字体研究
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TextEdit/Markdown/Mkdocs_Tutorials1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mermaid嵌入
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_5" >
        
          
          <label class="md-nav__link" for="__nav_9_5" id="__nav_9_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    小红书｜Python藏宝箱
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_5">
            <span class="md-nav__icon md-icon"></span>
            小红书｜Python藏宝箱
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/Tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    经（踩）验（坑）分（历）享（史）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PandasPrettier/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    在Jupyter中美化Pandas表格
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/SOS_Conda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    conda，你看到我们管理环境时的泪了吗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/Data_struct_recomend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据结构参考链接
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/Pyecharts1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PyEcharts合集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/MagicSquare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    小玩具：幻方｜拉丁方
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PIPREQS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python包管理工具pipreqs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PythonBisect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python二分排序函数Bisect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/Heapq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据结构:堆｜heapq
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/Random/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    随机数生成｜random
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PythonPieces9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据结构：set与frozenset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PythonPieces6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    微信读书可视化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PythonPieces7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python一些命令行操作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/Matplotlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Matplotlib相关
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/Python_deque/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    deque与namedtuple
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PythonPieces1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Itertools-小抄
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PythonPieces3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python解包运算符
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/Rdata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    R语言数据集(Partial)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/PythonPackages/PythonPieces8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pandas CheatSheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
        
          
          <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    小红书｜供应链管理
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_6">
            <span class="md-nav__icon md-icon"></span>
            小红书｜供应链管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/LittlesLaw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    利特尔定律
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/202401SupplyChain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    研究生课程：供应链管理与物流
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/Supplychain1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    三种工厂选址模型(Chapter_5.4)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    时间序列预测：静态方法(Chapter_7.5.1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    时间序列预测模型与框架：ARMA/Winter(Chapter_7.5/7.6)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    经济订货批量模型(EOQ)(Chapter_11.3)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EOQ模型的订货量确定与周期盘点(Chapter_11.3.2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    供应链综合计划策略I(Chapter_8.4)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    供应链综合计划策略II：案例分析(Chapter_8.5)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    规模经济管理：数量折扣I(Chapter_11.4)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    规模经济管理：数量折扣II(Chapter_11.4)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    运营管理：排队论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    安全库存：基于给定策略(Chapter_12.2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    安全库存：聚集/供给不确定/零件的情况(Chapter_12.3)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    报童模型I：最优可获得性水平的确定(Chapter_13.2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    报童模型II：沃尔玛案例分析(Chapter_13.2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Excel进行供应链绩效模拟(Chapter_13.Appendix)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    提高供应链盈利能力的杠杆(Chapter_13.3)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    供应链中的运输(Chapter_14_1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Supplychain/SupplyChain19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    供应链采购合同分析
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_7" >
        
          
          <label class="md-nav__link" for="__nav_9_7" id="__nav_9_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    微积分
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_7">
            <span class="md-nav__icon md-icon"></span>
            微积分
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Calculus/Math2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Calculus/Prosthaphaeresis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    和差化积
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Calculus/VariUpper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    变上限积分函数
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_8" >
        
          
          <label class="md-nav__link" for="__nav_9_8" id="__nav_9_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    线性代数
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_8">
            <span class="md-nav__icon md-icon"></span>
            线性代数
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/Conclusion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    总结
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/Chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    chapter1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/Chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    chapter2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/Chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    chapter3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/Chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    chapter4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/Chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    chapter5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_6
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_7
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_8
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_9
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_10
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_11
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_12
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_13
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/LinearAlgebra/MIT_course_14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIT | Course_14
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_9" >
        
          
          <label class="md-nav__link" for="__nav_9_9" id="__nav_9_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    概率论
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_9">
            <span class="md-nav__icon md-icon"></span>
            概率论
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Statistics/Basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    概率论基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Statistics/Quizes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    题目汇总
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Statistics/Random_Variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    随机变量
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Statistics/Number_characters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    随机变量的数字特征
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Statistics/Big_number/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    大数定律和中心极限定理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_10" >
        
          
          <label class="md-nav__link" for="__nav_9_10" id="__nav_9_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    供应链管理理论与案例
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_10">
            <span class="md-nav__icon md-icon"></span>
            供应链管理理论与案例
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SCMTheory/Chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第一章｜导论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SCMTheory/Chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第二章｜采购-I
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SCMTheory/Chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第三章｜采购-II
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SCMTheory/Chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第四章｜订货（全三章）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SCMTheory/Chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第五章｜啤酒游戏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SCMTheory/Chapter6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第六章｜供应链的协调与激励
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SCMTheory/Chapter7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第七章｜供应链整合
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SCMTheory/Chapter8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第八章｜供应链物流管理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_11" >
        
          
          <label class="md-nav__link" for="__nav_9_11" id="__nav_9_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    果系产品使用
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_11">
            <span class="md-nav__icon md-icon"></span>
            果系产品使用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/CS193p1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CS193p
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/AppleVisionPro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AppleVisionPro试用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/Keyshortcuts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    macOS快捷键
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/Shortcuts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    shortcuts快捷指令使用指南
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/AppleScript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apple的奇奇怪怪
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/SwiftBasics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Swift基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/Ray/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    软件推荐之Raycast
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/Mac_terminal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    macOS终端美化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/About_mail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    macOS下Mail使用学校邮箱
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Swift/FindBooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    macOS下寻找电子书的一些方法
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_12" >
        
          
          <label class="md-nav__link" for="__nav_9_12" id="__nav_9_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    语言学习
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_12">
            <span class="md-nav__icon md-icon"></span>
            语言学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/English/French/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    法语笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/English/English/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    英语笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/English/Words/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    英语记忆
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/English/EnglishEssay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    英文作文
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/English/Quotes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    英语文摘
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/English/LiteraryCriticism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    英语文学批评
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/ChatGPT/Prompt2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    大模型提示词整理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/AMASS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    制造与服务系统分析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/HighSchool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一些高中笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/IntelligentLogistics/IntelligentLogistics1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    研究生课程：智慧物流
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/IntelligentLogistics/LogisticsAlgorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    研究生课程：物流优化算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/fleet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    暑期学校-智能决策与算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Git_use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git 使用指南
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_20" >
        
          
          <label class="md-nav__link" for="__nav_9_20" id="__nav_9_20_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    时序预测相关
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_20">
            <span class="md-nav__icon md-icon"></span>
            时序预测相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/TimeSeries/MovingAverage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    简单滑动平均
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Engineering_eco/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    工程经济学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/MEMEssay/Class1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    工程管理类论文写作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_23" >
        
          
          <label class="md-nav__link" for="__nav_9_23" id="__nav_9_23_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    基础工业工程
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_23_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_23">
            <span class="md-nav__icon md-icon"></span>
            基础工业工程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/BasicIE/Quality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    质量控制 I
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/BasicIE/Taguchi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    田口方法
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_24" >
        
          
          <label class="md-nav__link" for="__nav_9_24" id="__nav_9_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    发展经济学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_24">
            <span class="md-nav__icon md-icon"></span>
            发展经济学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/DevelopEco/chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    重点提纲
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/IntTrad/InternationalTrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    国际贸易
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_26" >
        
          
          <label class="md-nav__link" for="__nav_9_26" id="__nav_9_26_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    管理学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_26_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_26">
            <span class="md-nav__icon md-icon"></span>
            管理学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Management/Management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    管理学导论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Management/Remain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    重点
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Vscode/keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VScode技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_28" >
        
          
          <label class="md-nav__link" for="__nav_9_28" id="__nav_9_28_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    人工智能工具们
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_28_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_28">
            <span class="md-nav__icon md-icon"></span>
            人工智能工具们
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/ChatGPT/Register/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    安装
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/ChatGPT/Reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    其他AI工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/ChatGPT/Prompt1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPT Prompt技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/ChatGPT/StableDiffusion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stable Diffusion 部署管窥
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/ChatGPT/Ollama/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ollama 本地部署
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_28_6" >
        
          
          <label class="md-nav__link" for="__nav_9_28_6" id="__nav_9_28_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    古登堡计划
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_28_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_28_6">
            <span class="md-nav__icon md-icon"></span>
            古登堡计划
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/ChatGPT/Knowledge/Terms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    专有名词释疑
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_29" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Study/SimulationCSS/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算社会学｜复杂系统｜仿真
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_29" id="__nav_9_29_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_29_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_29">
            <span class="md-nav__icon md-icon"></span>
            计算社会学｜复杂系统｜仿真
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/SimulationCSS/Notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    各种笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_30" >
        
          
          <label class="md-nav__link" for="__nav_9_30" id="__nav_9_30_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    其他平台电子笔记
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_30_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_30">
            <span class="md-nav__icon md-icon"></span>
            其他平台电子笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Mubu/WebsiteDesign/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网页设计与制作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Mubu/network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网页设计简单参数标注（应试用）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Mubu/Javs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Js简单参数标注（应试用）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Study/Mubu/InfoRetreval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    信息检索
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Talks/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    我的碎碎念
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            我的碎碎念
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/101_asks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于我的101问｜疑问集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/2021_talks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2021年底的无病呻吟
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/My2022/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    请回答，2022｜2022年终总结
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/2023_con/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    从经天路到小粉桥｜2023年终总结
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/2024_con/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    岁月何曾败美人｜2024年终总结
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Insomia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023年末-失眠漫记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Religion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    “圣母无染原罪”
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_Rococo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    “洛可可缪斯”
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Time_and_kill/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    “枪决行刑队”
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_bbs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    小百合BBS：一次时间的猝死
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_fairytale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    讲故事、听童话与利维坦的傲慢
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Book_is_all_you_need/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    如果你流落荒岛……
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/UG_reading_conclusion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一份抢救活了的读书记录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Occult/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    神秘学手记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/War/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    铁丝网与互联网
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_literature_AI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于AI时代的文字
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_language/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于语言
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Knowledge_share/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于知识分享
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_a_great_man/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于一位长者
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于记忆和记忆崇拜
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_gods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于神与我们所相信的
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/About_60s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    来自上世纪60年代的回响：关于理想与我们所怀念的
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/An_shi_chaos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    马嵬驿与安史乱
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Music_lines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一些歌词
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Articles_recomend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    荐文
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Books_recomend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    荐书
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Classical_music/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    古典音乐
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Talks/Feminism_talks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    女性主义
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Website/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    关于网站
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11" id="__nav_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            关于网站
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Website/tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第零篇｜内容快速索引
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Website/Step1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第一篇｜框架和托管
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Website/Step2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第二篇｜主题和美化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Website/Step3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第三篇｜字体和文本
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Website/Step4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第四篇｜插件和扩展
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#embedding" class="md-nav__link">
    <span class="md-ellipsis">
      Embedding
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#positional-embedding" class="md-nav__link">
    <span class="md-ellipsis">
      Positional Embedding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Positional Embedding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sinusoidal-positional-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Sinusoidal Positional Encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roperotary-positional-embedding" class="md-nav__link">
    <span class="md-ellipsis">
      RoPE:Rotary Positional Embedding
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#layernorm" class="md-nav__link">
    <span class="md-ellipsis">
      LayerNorm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LayerNorm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-not-batch-norm" class="md-nav__link">
    <span class="md-ellipsis">
      Why not Batch Norm?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-norm-cv" class="md-nav__link">
    <span class="md-ellipsis">
      Batch Norm: CV (🤔)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feed-forward-network-ffn" class="md-nav__link">
    <span class="md-ellipsis">
      Feed Forward Network (FFN)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-head-attention-mha" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-Head Attention (MHA)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Head Attention (MHA)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#functionality-what-for" class="md-nav__link">
    <span class="md-ellipsis">
      Functionality / What for?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-multi-head" class="md-nav__link">
    <span class="md-ellipsis">
      Why Multi-Head?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#softmax-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Softmax: usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cross-self-attention" class="md-nav__link">
    <span class="md-ellipsis">
      Cross / Self-Attention
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cross / Self-Attention">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mechanism-of-cross-attention" class="md-nav__link">
    <span class="md-ellipsis">
      Mechanism of Cross Attention
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-cross-attention-for-decoder-only" class="md-nav__link">
    <span class="md-ellipsis">
      NO Cross Attention for Decoder-Only!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#masked-self-attention-why-masked" class="md-nav__link">
    <span class="md-ellipsis">
      Masked Self Attention (Why masked?)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-prevent-gradient-loss" class="md-nav__link">
    <span class="md-ellipsis">
      How to prevent Gradient Loss? (🤔)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adam-optmz-features" class="md-nav__link">
    <span class="md-ellipsis">
      Adam Optmz: Features (🤔)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adam Optmz: Features (🤔)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      面试精炼版回答
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-prevent-overfitting" class="md-nav__link">
    <span class="md-ellipsis">
      How to prevent Overfitting?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to prevent Overfitting?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tiny-conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Tiny Conclusion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-qs-during-interview" class="md-nav__link">
    <span class="md-ellipsis">
      Other Qs during interview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other Qs during interview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-decoder-only-not-encoder-decoder" class="md-nav__link">
    <span class="md-ellipsis">
      Why Decoder-only, not Encoder-Decoder?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moe-mixture-of-experts" class="md-nav__link">
    <span class="md-ellipsis">
      MoE (Mixture of Experts)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MoE (Mixture of Experts)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#load-balancing-loss" class="md-nav__link">
    <span class="md-ellipsis">
      解决方案：负载均衡损失 (Load Balancing Loss)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



<a href="https://github.com/SmilingWayne/me/commits/main/docs/ML/Transformer.md" title="页面修改记录" class="md-content__button md-icon">
  <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="-2 0 23 23" id="meteor-icon-kit__regular-history" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.41421 6L5.70711 8.29289C6.09763 8.68342 6.09763 9.31658 5.70711 9.70711C5.31658 10.0976 4.68342 10.0976 4.29289 9.70711L0.29289 5.70711C-0.09763 5.31658 -0.09763 4.68342 0.29289 4.29289L4.29289 0.292893C4.68342 -0.0976311 5.31658 -0.0976311 5.70711 0.292893C6.09763 0.683418 6.09763 1.31658 5.70711 1.70711L3.41421 4H9.5C14.7467 4 19 8.25329 19 13.5C19 18.7467 14.7467 23 9.5 23C4.25329 23 0 18.7467 0 13.5C0 12.9477 0.44772 12.5 1 12.5C1.55228 12.5 2 12.9477 2 13.5C2 17.6421 5.35786 21 9.5 21C13.6421 21 17 17.6421 17 13.5C17 9.35786 13.6421 6 9.5 6H3.41421zM10 9V13H12C12.5523 13 13 13.4477 13 14C13 14.5523 12.5523 15 12 15H9C8.4477 15 8 14.5523 8 14V9C8 8.44771 8.4477 8 9 8C9.5523 8 10 8.44771 10 9z" fill="#758CA3"/></svg>
</a>
<a href="https://github.com/SmilingWayne/me/blob/main/docs/ML/Transformer.md?plain=1" title="页面源码" class="md-content__button md-icon">
  <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.3929 4.05365L14.8912 4.61112L15.3929 4.05365ZM19.3517 7.61654L18.85 8.17402L19.3517 7.61654ZM21.654 10.1541L20.9689 10.4592V10.4592L21.654 10.1541ZM3.17157 20.8284L3.7019 20.2981H3.7019L3.17157 20.8284ZM20.8284 20.8284L20.2981 20.2981L20.2981 20.2981L20.8284 20.8284ZM14 21.25H10V22.75H14V21.25ZM2.75 14V10H1.25V14H2.75ZM21.25 13.5629V14H22.75V13.5629H21.25ZM14.8912 4.61112L18.85 8.17402L19.8534 7.05907L15.8947 3.49618L14.8912 4.61112ZM22.75 13.5629C22.75 11.8745 22.7651 10.8055 22.3391 9.84897L20.9689 10.4592C21.2349 11.0565 21.25 11.742 21.25 13.5629H22.75ZM18.85 8.17402C20.2034 9.3921 20.7029 9.86199 20.9689 10.4592L22.3391 9.84897C21.9131 8.89241 21.1084 8.18853 19.8534 7.05907L18.85 8.17402ZM10.0298 2.75C11.6116 2.75 12.2085 2.76158 12.7405 2.96573L13.2779 1.5653C12.4261 1.23842 11.498 1.25 10.0298 1.25V2.75ZM15.8947 3.49618C14.8087 2.51878 14.1297 1.89214 13.2779 1.5653L12.7405 2.96573C13.2727 3.16993 13.7215 3.55836 14.8912 4.61112L15.8947 3.49618ZM10 21.25C8.09318 21.25 6.73851 21.2484 5.71085 21.1102C4.70476 20.975 4.12511 20.7213 3.7019 20.2981L2.64124 21.3588C3.38961 22.1071 4.33855 22.4392 5.51098 22.5969C6.66182 22.7516 8.13558 22.75 10 22.75V21.25ZM1.25 14C1.25 15.8644 1.24841 17.3382 1.40313 18.489C1.56076 19.6614 1.89288 20.6104 2.64124 21.3588L3.7019 20.2981C3.27869 19.8749 3.02502 19.2952 2.88976 18.2892C2.75159 17.2615 2.75 15.9068 2.75 14H1.25ZM14 22.75C15.8644 22.75 17.3382 22.7516 18.489 22.5969C19.6614 22.4392 20.6104 22.1071 21.3588 21.3588L20.2981 20.2981C19.8749 20.7213 19.2952 20.975 18.2892 21.1102C17.2615 21.2484 15.9068 21.25 14 21.25V22.75ZM21.25 14C21.25 15.9068 21.2484 17.2615 21.1102 18.2892C20.975 19.2952 20.7213 19.8749 20.2981 20.2981L21.3588 21.3588C22.1071 20.6104 22.4392 19.6614 22.5969 18.489C22.7516 17.3382 22.75 15.8644 22.75 14H21.25ZM2.75 10C2.75 8.09318 2.75159 6.73851 2.88976 5.71085C3.02502 4.70476 3.27869 4.12511 3.7019 3.7019L2.64124 2.64124C1.89288 3.38961 1.56076 4.33855 1.40313 5.51098C1.24841 6.66182 1.25 8.13558 1.25 10H2.75ZM10.0298 1.25C8.15538 1.25 6.67442 1.24842 5.51887 1.40307C4.34232 1.56054 3.39019 1.8923 2.64124 2.64124L3.7019 3.7019C4.12453 3.27928 4.70596 3.02525 5.71785 2.88982C6.75075 2.75158 8.11311 2.75 10.0298 2.75V1.25Z" fill="#627892"/>
<path d="M13 2.5V5C13 7.35702 13 8.53553 13.7322 9.26777C14.4645 10 15.643 10 18 10H22" stroke="#627892" stroke-width="1.5"/>
<path d="M7 14L6 15L7 16M11.5 16L12.5 17L11.5 18M10 14L8.5 18" stroke="#627892" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>



<h1 id="transformer">Transformer<a class="headerlink" href="#transformer" title="Permanent link">⚓︎</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 22990 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M360.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m64.6 136.1c-12.5 12.5-12.5 32.8 0 45.3l73.4 73.4-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0zm-274.7 0c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l73.3-73.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg></span> 130 行代码 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 2 张图片 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 78 分钟 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg></span> 总阅读量 <span id="busuanzi_value_page_pv"></span> 次</p>
</div>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/SmilingWayne/picsrepo/202509222258725.png" /></p>
<p><strong>神经网络，不会在代码中明确定义如何执行一个任务，而是去构建一个具有可调参数的灵活架构，就像旋钮一样，然后用大量实例告诉它给定一个输入的时候应该输出什么，设法调整各种参数值来模拟这种行为</strong>。</p>
<p>除了扩大参数量，重要问题是你需要找到灵活的方法进行训练：<strong>反向传播（Back- propagation）</strong>。</p>
<p>为了这种训练算法的有效运行，模型<span style="color:red;font-weight:bold">必须遵循某种特定架构 (Architecture) </span>。这就是Transformer: Attention is all you need. <a href="https://arxiv.org/pdf/1706.03762">arxiv</a>. 2017.06. Google.</p>
<p>可以参考的一些代码: <a href="http://nlp.seas.harvard.edu/annotated-transformer/">The Annotated Transformer</a>. </p>
<hr />
<h2 id="embedding">Embedding<a class="headerlink" href="#embedding" title="Permanent link">⚓︎</a></h2>
<p>词嵌入，NLP 的常用技术。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">InputEmbeddings</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d_model</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">vocab_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">d_model</span> <span class="o">=</span> <span class="n">d_model</span> <span class="c1"># 模型的embedding 的维度 (512)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vocab_size</span> <span class="o">=</span> <span class="n">vocab_size</span> 
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">embedding</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Embedding</span><span class="p">(</span><span class="n">vocab_size</span><span class="p">,</span> <span class="n">d_model</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>        <span class="c1"># embedding 本质上是把一个表示 token 的索引映射到向量中</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span class="c1"># (batch, seq_len) --&gt; (batch, seq_len, d_model)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>        <span class="c1"># Multiply by sqrt(d_model) to scale the embeddings according to the paper</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        <span class="c1"># embedding 的结果需要进行缩放</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">embedding</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d_model</span><span class="p">)</span>
</code></pre></div>
<h2 id="positional-embedding">Positional Embedding<a class="headerlink" href="#positional-embedding" title="Permanent link">⚓︎</a></h2>
<div class="admonition question">
<p class="admonition-title">核心问题：为什么要位置编码？</p>
<p>Transformer 的自注意力机制本身是<strong>置换不变的（Permutation-Invariant）</strong>。也就是说，如果你打乱输入句子中词的顺序，注意力层的输出是完全一样的，因为它只关心词与词之间的关系，不关心谁在谁前面。<strong>这显然不符合自然语言的规律，因此必须引入一种方法来告诉模型每个词的绝对或相对位置</strong>。</p>
</div>
<p>Transformer 中的 位置编码，传递每个Token在上下文中的位置信息，维度和 embedding 一样，遵循：</p>
<p><span class="arithmatex">\(PE(pos, 2i) = \sin \dfrac{pos}{10000^{\frac{2i}{d_{model}}}}\)</span></p>
<p><span class="arithmatex">\(PE(pos, 2i + 1) = \cos \dfrac{pos}{10000^{\frac{2i + 1}{d_{model}}}}\)</span></p>
<p>对于上下文中每个位置的 embedding，根据embedding的索引奇偶给出对应的计算。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">PositionalEncoding</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d_model</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">seq_len</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dropout</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">d_model</span> <span class="o">=</span> <span class="n">d_model</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">seq_len</span> <span class="o">=</span> <span class="n">seq_len</span> <span class="c1"># 上下文的长度</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dropout</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Dropout</span><span class="p">(</span><span class="n">dropout</span><span class="p">)</span> <span class="c1"># Dropout: 减少过拟合</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        <span class="c1"># Create a matrix of shape (seq_len, d_model) </span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>        <span class="n">pe</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">seq_len</span><span class="p">,</span> <span class="n">d_model</span><span class="p">)</span> <span class="c1"># 所有上下文每个位置的 RoPE 的矩阵</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>        <span class="c1"># Create a vector of shape (seq_len)</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>        <span class="n">position</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">seq_len</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float</span><span class="p">)</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># (seq_len, 1)</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>        <span class="c1"># Create a vector of shape (d_model)</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>        <span class="n">div_term</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_model</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">float</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mf">10000.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">d_model</span><span class="p">))</span> <span class="c1"># (d_model / 2)</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>        <span class="c1"># Apply sine to even indices</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>        <span class="n">pe</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">position</span> <span class="o">*</span> <span class="n">div_term</span><span class="p">)</span> <span class="c1"># sin(position * (10000 ** (2i / d_model))</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        <span class="c1"># Apply cosine to odd indices</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>        <span class="c1"># 这里的 even / odd indices 是 embedding 的 even / odd 位置的参数</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        <span class="c1"># 这里的 position 是这个 token 在上下文中的位置</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>        <span class="n">pe</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">position</span> <span class="o">*</span> <span class="n">div_term</span><span class="p">)</span> <span class="c1"># cos(position * (10000 ** (2i / d_model))</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>        <span class="c1"># Add a batch dimension to the positional encoding</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>        <span class="c1"># 添加一个 batch 维度方便后面训练</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>        <span class="n">pe</span> <span class="o">=</span> <span class="n">pe</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># (1, seq_len, d_model)</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>        <span class="c1"># Register the positional encoding as a buffer</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">register_buffer</span><span class="p">(</span><span class="s1">&#39;pe&#39;</span><span class="p">,</span> <span class="n">pe</span><span class="p">)</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pe</span><span class="p">[:,</span> <span class="p">:</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:])</span><span class="o">.</span><span class="n">requires_grad_</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># (batch, seq_len, d_model)</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>        <span class="c1"># positional embedding 的部分不需要计算梯度 直接加到 embedding 层上即可</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropout</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
<h3 id="sinusoidal-positional-encoding">Sinusoidal Positional Encoding<a class="headerlink" href="#sinusoidal-positional-encoding" title="Permanent link">⚓︎</a></h3>
<p>这是 "Attention Is All You Need" 论文中提出的原始方案，也就是 <strong>“绝对位置编码”</strong>。</p>
<p>它为序列中的每一个<strong>绝对位置</strong>（如第1个词、第2个词...）生成一个固定的、唯一的向量，然后将这个位置向量<strong>加到</strong>对应位置的词嵌入向量上。</p>
<p><mark>做法 (How it works):</mark></p>
<ol>
<li>
<p><strong>生成位置向量</strong>：对于位置为 <code>pos</code>、维度为 <code>i</code> 的分量，其编码值通过 <code>sin</code> 和 <code>cos</code> 函数计算得出：</p>
<ul>
<li>当 <code>i</code> 是偶数时： <span class="arithmatex">\(PE_{(pos, 2i)} = \sin(pos / 10000^{2i/d_{model}})\)</span></li>
<li>当 <code>i</code> 是奇数时： <span class="arithmatex">\(PE_{(pos, 2i+1)} = \cos(pos / 10000^{2i/d_{model}})\)</span></li>
</ul>
<p>其中，<span class="arithmatex">\(pos\)</span> 是词在序列中的位置（0, 1, 2, ...），<span class="arithmatex">\(i\)</span> 是维度的索引（0, 1, 2, ...），<span class="arithmatex">\(d_{model}\)</span> 是词嵌入的总维度。</p>
</li>
<li>
<p><strong>集成方式</strong>：将生成的固定位置向量 <span class="arithmatex">\(PE\)</span> <strong>直接加到</strong>输入的词嵌入向量 <span class="arithmatex">\(X_{embedding}\)</span> 上。
    $$
    X_{final} = X_{embedding} + PE
    $$
    这个新的 <span class="arithmatex">\(X_{final}\)</span> 向量既包含了词的语义信息，也包含了词的绝对位置信息。</p>
</li>
</ol>
<hr />
<ul>
<li><strong>优点1 (固定且可外推)</strong>：它是通过公式计算得到的，不需要训练。理论上，它可以生成任意长度序列的位置编码，具备<strong>一定</strong>的外推能力。</li>
<li><strong>优点2 (隐含相对位置)</strong>：论文作者证明，对于任意固定的偏移量 <span class="arithmatex">\(k\)</span>， <span class="arithmatex">\(PE_{pos+k}\)</span> 可以表示为 <span class="arithmatex">\(PE_{pos}\)</span> 的一个线性变换。这意味着模型<strong>有潜力</strong>从绝对位置编码中学习到相对位置关系。</li>
<li><strong>缺点 (间接与混合)</strong>：模型需要<strong>自己学习</strong>去理解这种通过 <code>sin/cos</code> 编码的相对位置信息，这是一种间接的方式。更重要的是，通过<strong>加法</strong>将位置信息和语义信息混合在一起，可能会在一定程度上“污染”原始的语义表示。</li>
</ul>
<div class="admonition question">
<p class="admonition-title">为什么要用 sin， cos 三角函数？</p>
<p>这个设计非常巧妙，主要利用了三角函数的性质：</p>
<p><strong>唯一性</strong>：对于每个位置 <span class="arithmatex">\(pos\)</span>，它都会生成一个独一无二的位置向量。
有界性：sin 和 cos 的值域在 [-1, 1] 之间，使得位置编码的值不会过大或过小，<u>有利于模型训练的稳定性。</u></p>
<p><strong>核心特性</strong>：蕴含相对位置信息：这是最关键的一点。<u>一个位置为 <span class="arithmatex">\(pos+k\)</span> 的位置向量 <span class="arithmatex">\(PE_{pos+k}\)</span>，可以被表示为位置为 <span class="arithmatex">\(pos\)</span> 的向量 <span class="arithmatex">\(PE_{pos}\)</span> 的一个线性变换。这意味着，模型可以轻易地学习到 token 之间的相对位置关系</u>。例如， Attention 机制可以学会“关注距离当前词前面4个位置的词”，<mark>因为不同位置之间的这种“距离关系”在向量空间中是有规律的</mark>。</p>
</div>
<hr />
<h3 id="roperotary-positional-embedding">RoPE:Rotary Positional Embedding<a class="headerlink" href="#roperotary-positional-embedding" title="Permanent link">⚓︎</a></h3>
<p>RoPE 的思想非常优雅：<strong>通过向量旋转的方式，将相对位置信息集成到注意力计算中</strong>。它不改变词向量本身，而是在计算 Attention Score 的时候（Q、K 点积时）引入位置信息。</p>
<p>RoPE 不直接修改词嵌入。<mark>它等到 Q 和 K 向量生成之后，再对其进行操作</mark>。</p>
<ol>
<li>
<p><strong>向量旋转</strong>：将 <span class="arithmatex">\(d\)</span> 维的 Q 和 K 向量，两两一组（例如 <span class="arithmatex">\((q_0, q_1), (q_2, q_3), ...\)</span>）看作是在二维平面上的向量（或者说看作复数）。然后将每个二维向量都旋转一个角度 <span class="arithmatex">\(\theta_m\)</span>，这个角度 <span class="arithmatex">\(\theta_m\)</span> 与词的位置 <span class="arithmatex">\(m\)</span> 相关。</p>
<ul>
<li>
<p>对于位置为 <span class="arithmatex">\(m\)</span> 的词向量 <span class="arithmatex">\(q_m\)</span>，其旋转操作可以用一个旋转矩阵 <span class="arithmatex">\(R_m\)</span> 来表示：</p>
<pre class="arithmatex">\[
q'_m = R_m q_m
\]</pre>
<p><mark>这个操作会施加在 Q 和 K 向量上，但<strong>不会</strong>施加在 V 向量上</mark>。</p>
</li>
</ul>
</li>
<li>
<p><strong>神奇的内积</strong>：经过旋转后，两个位置 <span class="arithmatex">\(m\)</span> 和 <span class="arithmatex">\(n\)</span> 上的新 Query 向量 <span class="arithmatex">\(q'_m\)</span> 和新 Key 向量 <span class="arithmatex">\(k'_n\)</span> 的内积，会神奇地只与它们的<strong>相对位置</strong> <span class="arithmatex">\((m-n)\)</span> 和原始的 <span class="arithmatex">\(q, k\)</span> 向量相关，而与它们的绝对位置 <span class="arithmatex">\(m, n\)</span> 无关。</p>
<p>数学上可以证明：</p>
<pre class="arithmatex">\[
(q'_m)^T k'_n = (R_m q_m)^T (R_n k_n) = \text{一个只依赖于 } (q_m, k_n) \text{ 和 } (m-n) \text{ 的函数}
\]</pre>
<p>这就意味着，注意力分数天然地就包含了相对位置信息！</p>
<p>它通过旋转操作，<strong>直接将相对位置信息编码进了 Attention 的计算过程里。</strong></p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">效果/特点</p>
<ul>
<li><strong>优点1 (显式的相对位置编码)</strong>：RoPE 直接在注意力分数计算中注入了相对位置信息。<mark>模型不需要“学习”去理解相对位置，而是直接利用它。这更加直观和高效</mark>。</li>
<li><strong>优点2 (更好的外推性)</strong>：由于其相对位置的性质，RoPE 在处理比训练时更长的序列时，表现出了非常好的外推性能（即泛化到未见过的长度）。</li>
<li><strong>优点3 (不改变语义信息)</strong>：旋转操作只改变向量的方向，不改变其模长（L2 Norm）。这意味着它在引入位置信息的同时，不会像加法那样改变词向量本身的语义强度。</li>
<li><strong>成为主流</strong>：正是因为这些优异的性质，RoPE 成为了当前最先进的 Decoder-Only LLM 的事实标准。</li>
</ul>
</div>
<table>
<thead>
<tr>
<th style="text-align: left;">特性</th>
<th style="text-align: left;">三角函数绝对位置编码 (Sinusoidal PE)</th>
<th style="text-align: left;">RoPE 旋转位置编码</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>本质</strong></td>
<td style="text-align: left;"><strong>绝对位置编码</strong> (Absolute)</td>
<td style="text-align: left;"><strong>相对位置编码</strong> (Relative, in essence)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>注入方式</strong></td>
<td style="text-align: left;"><strong>加法</strong> (Additive)：直接加在词嵌入上</td>
<td style="text-align: left;"><strong>乘法</strong> (Multiplicative)：通过旋转矩阵修改Q和K</td>
</tr>
<tr>
<td style="text-align: left;"><strong>作用对象</strong></td>
<td style="text-align: left;">词嵌入向量 (Token Embedding)</td>
<td style="text-align: left;">Query 和 Key 向量（在Attention计算中）</td>
</tr>
<tr>
<td style="text-align: left;"><strong>相对位置</strong></td>
<td style="text-align: left;"><strong>间接学习</strong>：模型需要从绝对位置的线性关系中学习相对位置</td>
<td style="text-align: left;"><strong>直接注入</strong>：内积结果天生只与相对位置有关</td>
</tr>
<tr>
<td style="text-align: left;"><strong>是否可学习</strong></td>
<td style="text-align: left;">否，是固定公式计算</td>
<td style="text-align: left;">否，是固定公式计算</td>
</tr>
<tr>
<td style="text-align: left;"><strong>核心优势</strong></td>
<td style="text-align: left;">简单，无参数</td>
<td style="text-align: left;"><strong>天然携带相对位置关系</strong>，外推性好，不改变语义模长</td>
</tr>
<tr>
<td style="text-align: left;"><strong>当前应用</strong></td>
<td style="text-align: left;">早期 Transformer 模型 (如 BERT)</td>
<td style="text-align: left;"><strong>主流大模型</strong> (LLaMA, PaLM, GLM 等)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="layernorm">LayerNorm<a class="headerlink" href="#layernorm" title="Permanent link">⚓︎</a></h2>
<p>相当于在特征维度的归一化。</p>
<p>具体讲，在 Transformer 中，Layer Norm 是对Attention层输出的整个 <code>seq_len * d_model</code> 矩阵进行归一化。</p>
<p><mark>Layer Norm 的 "Layer" 指的是一个样本在当前层的<strong>所有激活值</strong>。在 Transformer 的这个场景下，一个样本的“层”就是指整个 <code>seq_len * d_model</code> 的矩阵</mark>。</p>
<ul>
<li><strong>输入</strong>: 一个 <code>[seq_len, d_model]</code> 的矩阵。</li>
<li><strong>操作</strong>:<ol>
<li>将这个 <code>seq_len * d_model</code> 矩阵看作一个大的向量，或者说，计算<strong>所有</strong> <code>seq_len * d_model</code> 个元素的<strong>总均值 <span class="arithmatex">\(\mu_{total}\)</span></strong> 和<strong>总方差 <span class="arithmatex">\(\sigma_{total}^2\)</span></strong>。</li>
<li>这里你只会得到<strong>一个均值</strong>和<strong>一个方差</strong>。</li>
<li>使用这对<strong>全局的</strong> <span class="arithmatex">\((\mu_{total}, \sigma_{total})\)</span> 来归一化矩阵中的<strong>每一个元素</strong>。</li>
</ol>
</li>
</ul>
<p><strong>具体步骤：</strong></p>
<ol>
<li><strong>输入</strong>: 矩阵 <span class="arithmatex">\(X\)</span>，维度为 <code>[seq_len, d_model]</code>。</li>
<li>
<p><strong>计算统计量</strong>:</p>
<pre class="arithmatex">\[
\mu = \frac{1}{\text{seq\_len} \times d_{model}} \sum_{i=1}^{\text{seq\_len}} \sum_{j=1}^{d_{model}} X_{ij}
\]</pre>
<pre class="arithmatex">\[
\sigma^2 = \frac{1}{\text{seq\_len} \times d_{model}} \sum_{i=1}^{\text{seq\_len}} \sum_{j=1}^{d_{model}} (X_{ij} - \mu)^2
\]</pre>
<p>注意：这里只有一个 <span class="arithmatex">\(\mu\)</span> 和一个 <span class="arithmatex">\(\sigma\)</span>。</p>
</li>
<li>
<p><strong>归一化</strong>: 对矩阵 <span class="arithmatex">\(X\)</span> 中的每一个元素 <span class="arithmatex">\(X_{ij}\)</span> 进行归一化：</p>
<pre class="arithmatex">\[
\hat{X}_{ij} = \frac{X_{ij} - \mu}{\sqrt{\sigma^2 + \epsilon}}
\]</pre>
</li>
<li>
<p><strong>缩放与偏移</strong>: 最后，引入两个可学习的参数，<strong>gamma (<span class="arithmatex">\(\gamma\)</span>)</strong> 和 <strong>beta (<span class="arithmatex">\(\beta\)</span>)</strong>。这两个参数的维度通常是 <code>d_model</code>。它们的作用是让模型能够恢复一部分归一化操作可能丢失的表示能力。</p>
<pre class="arithmatex">\[
Y_{ij} = \gamma_j \cdot \hat{X}_{ij} + \beta_j
\]</pre>
<p>注意，这里的 <span class="arithmatex">\(\gamma\)</span> 和 <span class="arithmatex">\(\beta\)</span> 是按特征维度（<code>d_model</code>）广播的。第 <code>j</code> 个特征维度的所有元素，都使用相同的 <span class="arithmatex">\(\gamma_j\)</span> 和 <span class="arithmatex">\(\beta_j\)</span> 进行缩放和偏移。</p>
</li>
</ol>
<p><strong>这样做的直觉：</strong></p>
<p>将整个 <code>seq_len * d_model</code> 矩阵一起归一化，其背后的直觉是：对于单个训练样本，在经过一个层（如自注意力层）的计算后，我们希望<strong>整个输出的分布是稳定的</strong>，而不仅仅是每个 token 的表示是独立的稳定。这种方式将整个序列的表示视为一个整体来进行控制，有助于稳定深层模型的训练动态，防止梯度爆炸或消失，这在实践中被证明是非常有效的。</p>
<div class="admonition example">
<p>我们来看一个 <code>batch_size=1</code>, <code>seq_len=4</code>, <code>d_model=3</code> 的例子。</p>
<p><strong>输入矩阵 X (4x3):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>[[1, 2, 3],
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>[4, 5, 6],
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>[7, 8, 9],
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>[0, 1, 2]]
</code></pre></div></p>
<p><strong>你的理解 (Row Norm):</strong>
1.  对 <code>[1, 2, 3]</code> 计算均值和方差，归一化这一行。
2.  对 <code>[4, 5, 6]</code> 计算均值和方差，归一化这一行。
3.  ...</p>
<p><strong>实际的 Layer Norm:</strong>
1.  对<strong>所有12个数字</strong> <code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2]</code> 计算一个<strong>总均值</strong> <span class="arithmatex">\(\mu\)</span> 和一个<strong>总方差</strong> <span class="arithmatex">\(\sigma^2\)</span>。
    *   <span class="arithmatex">\(\mu = (1+2+...+9+0+1+2) / 12 = 4.0\)</span>
    *   ...计算 <span class="arithmatex">\(\sigma^2\)</span>
2.  用这对 <span class="arithmatex">\((\mu, \sigma)\)</span> 去归一化这12个数字中的每一个。</p>
</div>
<p>同样的，这里归一化的参数也是可以学习的。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">LayerNormalization</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">eps</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">10</span><span class="o">**-</span><span class="mi">6</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">eps</span> <span class="o">=</span> <span class="n">eps</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">features</span><span class="p">))</span> <span class="c1"># alpha is a learnable parameter</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bias</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">features</span><span class="p">))</span> <span class="c1"># bias is a learnable parameter</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>        <span class="c1"># x: (batch, seq_len, hidden_size)</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>         <span class="c1"># Keep the dimension for broadcasting</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>        <span class="n">mean</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdim</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="c1"># (batch, seq_len, 1)</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>        <span class="c1"># 相当于,每个上下文中,每一个位置 (第1, 2, ,3 ... , 512个位置的embedding做了一个Normalization)</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>        <span class="c1"># Keep the dimension for broadcasting</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>        <span class="n">std</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">dim</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdim</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="c1"># (batch, seq_len, 1)</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>        <span class="c1"># eps is to prevent dividing by zero or when std is very small</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>        <span class="c1"># 归一化的参数 (一个是乘积,一个是累加的bias）都是可以学习的</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">std</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">eps</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bias</span>
</code></pre></div>
<h3 id="why-not-batch-norm">Why not Batch Norm?<a class="headerlink" href="#why-not-batch-norm" title="Permanent link">⚓︎</a></h3>
<p><strong>简短的回答是：因为 Transformer 处理的是变长的序列数据，Layer Normalization (LN) 独立于批次大小（Batch Size）和序列长度，对每个样本独立进行归一化，非常适合 NLP 任务；而 Batch Normalization (BN) 依赖于整个批次的统计信息，<mark>对于变长的文本序列适应性很差，并且在小批量下表现不稳定。</mark></strong></p>
<blockquote>
<p>比如，同一个批次，同一个位置，可能有很多文本Token都是空白，填补了 PAD。这导致整个 Batch 的方差过大，训练不稳定。</p>
</blockquote>
<p>下面我们来详细拆解一下。</p>
<p><mark>Normalization 的目标是解决“内部协变量偏移”（Internal Covariate Shift）问题，Batch Norm 对一个 mini-batch 内的<strong>同一个特征（channel）</strong>进行归一化</mark>。 </p>
<ul>
<li><strong>操作对象</strong>：给定一个批次的数据，维度为 <span class="arithmatex">\([N, L, D]\)</span> (批次大小, 序列长度, 特征维度)。</li>
<li><strong>计算方式</strong>：BN 会选择<strong>第 <span class="arithmatex">\(d\)</span> 个特征</strong>（<span class="arithmatex">\(d\)</span> from 1 to <span class="arithmatex">\(D\)</span>），然后计算这个特征在<strong>所有 <span class="arithmatex">\(N\)</span> 个样本</strong>和<strong>所有 <span class="arithmatex">\(L\)</span> 个位置</strong>上的均值和方差，用这个均值和方差来归一化所有样本的第 <span class="arithmatex">\(d\)</span> 个特征。</li>
<li><strong>核心</strong>：<strong>跨样本（Across Samples）</strong> 进行归一化。</li>
</ul>
<p><span style="color:red">在 Transformer (NLP) 中的局限性</span></p>
<ol>
<li>
<p><strong>对可变序列长度的适应性极差（最主要原因）</strong>：</p>
<ul>
<li>NLP 任务中的句子长度千差万别。一个批次中可能既有 10 个词的短句，也有 500 个词的长句。</li>
<li>如果一个批次里的句子都用 <code>&lt;pad&gt;</code> 符号填充到相同长度，那么在计算 BN 的均值和方差时，这些填充的 <code>&lt;pad&gt;</code> 符号也会被计入统计，这会<u>引入大量的噪声</u>，严重影响归一化效果。</li>
<li>即使不填充，如何对齐不同长度序列的同一“位置”的特征并计算其统计量也是一个非常棘手且不自然的问题。比如，<u>批次中第一个句子的第 10 个词和第二个句子的第 10 个词，它们的语义和统计特性可能完全不同。</u></li>
</ul>
</li>
<li>
<p><strong>对小批量大小（Small Batch Size）敏感</strong>：</p>
<ul>
<li>Transformer 模型（尤其是大型语言模型）通常非常大，占用大量 GPU 显存。这迫使我们在训练时只能使用很小的批次大小（有时甚至为 1）。</li>
<li>BN 严重依赖批次大小来获得稳定、有代表性的统计数据（均值和方差）。当批次很小时，计算出的均值和方差会有很大的噪声，导致模型训练不稳定，性能下降。</li>
</ul>
</li>
<li>
<p><strong>训练和推理时的行为不一致</strong>：</p>
<ul>
<li>BN 在训练时使用当前批次的统计数据，在推理时则使用在整个训练集上计算出的滑动平均值。这种不一致性为模型实现和部署增加了一丝复杂性。</li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">在 Transformer 中的优势</p>
<ol>
<li>
<p><strong>完美适应可变序列长度</strong>：</p>
<ul>
<li>因为 LN 是对单个样本进行操作，所以一个样本是长是短，或者批次中其他样本是长是短，都完全不影响对当前样本的归一化计算。每个样本都有自己的均值和方差。</li>
</ul>
</li>
<li>
<p><strong>不依赖于批次大小</strong>：</p>
<ul>
<li>LN 的计算完全在样本内部，与批次大小无关。即使批次大小为 1，也能进行稳定有效的归一化。这对于训练大型 Transformer 模型至关重要。</li>
</ul>
</li>
<li>
<p><strong>训练和推理时行为一致</strong>：</p>
<ul>
<li>无论在训练还是推理，LN 的计算方式都是一样的，都是对当前输入样本进行归一化，不需要像 BN 那样维护一个全局的滑动平均值。这使得模型行为更具确定性，实现也更简单。</li>
</ul>
</li>
</ol>
</div>
<h3 id="comparison">Comparison<a class="headerlink" href="#comparison" title="Permanent link">⚓︎</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">特性</th>
<th style="text-align: left;">Batch Normalization (BN)</th>
<th style="text-align: left;">Layer Normalization (LN)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>归一化方向</strong></td>
<td style="text-align: left;">对<strong>一个特征</strong>在<strong>整个批次</strong>上归一化</td>
<td style="text-align: left;">对<strong>一个样本</strong>在<strong>所有特征</strong>上归一化</td>
</tr>
<tr>
<td style="text-align: left;"><strong>依赖性</strong></td>
<td style="text-align: left;">强依赖批次大小</td>
<td style="text-align: left;">完全独立于批次大小</td>
</tr>
<tr>
<td style="text-align: left;"><strong>对变长序列</strong></td>
<td style="text-align: left;">适应性差，填充符会引入噪声</td>
<td style="text-align: left;"><strong>完美适应</strong>，每个样本独立计算</td>
</tr>
<tr>
<td style="text-align: left;"><strong>使用场景</strong></td>
<td style="text-align: left;">图像（CNN），特征分布相对稳定</td>
<td style="text-align: left;"><strong>序列数据（RNN, Transformer）</strong></td>
</tr>
<tr>
<td style="text-align: left;"><strong>训练/推理</strong></td>
<td style="text-align: left;">行为不一致</td>
<td style="text-align: left;">行为一致</td>
</tr>
</tbody>
</table>
<p>你提出的这个追问非常精准，它让你从“为什么A不适合”的被动理解，转向了“为什么B适合”的主动理解，形成了知识的闭环。</p>
<p>你的初始回答非常正确。现在，我们来深入探讨你的追问：<strong>Batch Norm (BN) 一般用在什么任务上？为什么它在这些任务上表现优异？</strong></p>
<h3 id="batch-norm-cv">Batch Norm: CV (🤔)<a class="headerlink" href="#batch-norm-cv" title="Permanent link">⚓︎</a></h3>
<p>如果你看到一个现代非 Transformer 架构的<strong>卷积神经网络 (Convolutional Neural Network, CNN)</strong>，比如 ResNet, VGG, Inception, EfficientNet 等，你几乎总能在它的卷积层和全连接层之间找到 Batch Norm 的身影。</p>
<p>BN最主要和最成功的应用领域是<strong>计算机视觉</strong>，涵盖了以下任务：</p>
<ul>
<li><strong>图像分类 (Image Classification)</strong></li>
<li><strong>目标检测 (Object Detection)</strong></li>
<li><strong>图像分割 (Image Segmentation)</strong></li>
<li><strong>图像生成 (Image Generation)</strong> (在生成器中)</li>
</ul>
<p>这主要源于 CV 任务中数据（图像）的特性与 BN 的工作原理高度契合。</p>
<p><span style="color:red;font-weight:bold">数据特性：固定的输入尺寸和通道独立性 (Fixed Size &amp; Channel Independence)</span></p>
<p>这是最根本的原因。</p>
<ul>
<li><strong>图像处理的范式</strong>：在输入到一个 CNN 之前，无论原始图像大小如何，它们通常都会被<strong>缩放或裁剪到一个固定的尺寸</strong>，例如 <code>224x224</code> 像素。</li>
<li><strong>数据表示</strong>：一批 (Batch) 图像的数据张量通常表示为 <code>[N, C, H, W]</code>：<ul>
<li><code>N</code>: 批次大小 (Batch Size)</li>
<li><code>C</code>: 通道数 (Channels, 如_R_G_B_为3)</li>
<li><code>H</code>: 高度 (Height)</li>
<li><code>W</code>: 宽度 (Width)</li>
</ul>
</li>
<li><strong>BN 的工作方式</strong>：BN 的计算是沿着 <code>N</code>, <code>H</code>, <code>W</code> 这三个维度进行的，而<strong>为每一个通道 <code>C</code> 独立计算</strong>均值和方差。</li>
</ul>
<p>BN 旨在问这样一个问题：“对于这一批所有图像的<strong>同一个通道</strong>（比如蓝色通道），所有像素位置的平均激活值和方差是多少？”</p>
<p>这个提问基于如下的假设：</p>
<ul>
<li><strong>空间相关性</strong>：图像中的一个像素和它周围的像素是有关系的。</li>
<li><strong>统计一致性</strong>：对于一个大规模、经过良好洗牌的图像数据集（比如 ImageNet），一批猫的图片和另一批猫的图片，在统计特征上是相似的。因此，用一批数据的均值/方差去近似整个数据集的均值/方差是合理的。</li>
</ul>
<p>这和 NLP 任务形成了鲜明对比。在 NLP 中，句子是<strong>变长</strong>的，你无法对一批句子中“第10个词”的向量做统计，因为句子A的第10个词（比如“的”）和句子B的第10个词（比如“猫”）毫无关联。而一批图像的“第(10,10)个像素”则很可能都属于背景或某个物体的一部分，它们的统计量是有意义的。</p>
<p><span style="color:red;font-weight:bold">大批量训练 (Large Batch Sizes) 的可行性</span></p>
<ul>
<li><strong>统计的稳定性</strong>：BN 的效果很大程度上取决于<strong>批次统计量对全局统计量的近似程度</strong>。批次越大 (Large Batch)，这个近似就越准确，训练就越稳定。</li>
<li><strong>CV 训练的实践</strong>：在 CV 领域，得益于 GPU 并行计算的优化，使用较大的 Batch Size (如 64, 128, 256...) 是常规操作。这为 BN 提供了表现优异的土壤。</li>
<li><strong>反面例子</strong>：当 Batch Size 很小（比如2或4）时，批次的均值和方差会剧烈波动，这反而会给模型带来噪声，导致训练不稳定。这也是为什么在某些显存受限的场景（如高分辨率图像分割）下，人们会用其他归一化方法（如 Group Normalization）替代 BN。</li>
</ul>
<p><span style="color:red;font-weight:bold">解决内部协变量偏移 (Internal Covariate Shift, ICS)</span></p>
<p>这也是 BN 论文中提出的核心动机。深层网络的每一层都在学习，导致其输出的数据分布在训练过程中不断变化。对于下一层来说，它的输入分布一直在“漂移”，这使得学习变得困难。</p>
<p>BN 通过在每一层强制将输入数据归一化到<strong>均值为0，方差为1</strong>的稳定分布，极大地缓解了这个问题，带来了两大好处：
*   <strong>可以使用更高的学习率</strong>，加速模型收敛。
*   <strong>降低了对参数初始化的敏感度</strong>，让训练更加容易。</p>
<hr />
<h2 id="feed-forward-network-ffn">Feed Forward Network (FFN)<a class="headerlink" href="#feed-forward-network-ffn" title="Permanent link">⚓︎</a></h2>
<p>其实是两个通过ReLU连接的全连接层，对 embedding 进行学习。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">FeedForwardBlock</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="c1"># Feedforward Network,本质上是两个全连接层，激活函数用ReLU连接</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="c1"># &quot;applied to each position separately and identically&quot;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="c1"># FFN(x) = max(0, xW_1 + b_1)W_2 + b_2</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d_model</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">d_ff</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dropout</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">linear_1</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">d_model</span><span class="p">,</span> <span class="n">d_ff</span><span class="p">)</span> <span class="c1"># w1 and b1</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dropout</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Dropout</span><span class="p">(</span><span class="n">dropout</span><span class="p">)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">linear_2</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">d_ff</span><span class="p">,</span> <span class="n">d_model</span><span class="p">)</span> <span class="c1"># w2 and b2</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>        <span class="c1"># 先把每个位置的 embedding 传递到 dff (=2048) 维度的全连接层，然后再连接回 512 (d_model)</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>        <span class="c1"># (batch, seq_len, d_model) --&gt; (batch, seq_len, d_ff) --&gt; (batch, seq_len, d_model)</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">linear_2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropout</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">relu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear_1</span><span class="p">(</span><span class="n">x</span><span class="p">))))</span>
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">为什么需要这一层？</p>
<p>简单来说，FFN 的核心作用有两个：</p>
<ol>
<li><strong>增加非线性变换</strong>：这是最根本和最重要的作用。</li>
<li><strong>进行表示空间的转换和提炼</strong>：对注意力层聚合后的信息进行进一步的加工和筛选。</li>
</ol>
<p>让我们来详细探讨一下。</p>
<p><mark>为什么“非线性”如此重要？</mark></p>
<p>首先，我们回顾一下注意力层的核心计算。它的输出本质上是输入值（Values）的一个<strong>加权平均和</strong>。</p>
<pre class="arithmatex">\[
\text{Attention output} = \sum_{i} \text{weight}_i \cdot \text{Value}_i
\]</pre>
<p>尽管权重（weight）的计算（通过 softmax）是​​非线性的，但对于 <code>Value</code> 向量来说，最终的操作是一个线性组合。如果你连续堆叠多个只有注意力层的模块（即使是多头的），整个模型的大部分计算仍然是线性的变换序列。而<strong>多个线性变换的堆叠其效果等价于一个单独的线性变换</strong>。</p>
<p>这意味着，如果没有 FFN 引入的非线性激活函数（通常是 ReLU 或 GELU），Transformer 无论堆叠多少层，其表达能力都会受到极大限制，<strong>本质上仍然是一个（非常复杂的）线性模型。它将无法学习数据中存在的复杂模式和非线性关系</strong>，比如语言中复杂的语法、逻辑和语义关系。</p>
<p><strong>所以，FFN 引入的非线性激活函数是模型“深度”之所以有效的关键。</strong></p>
<p><mark>FFN 的具体结构和作用：“处理和提炼”信息</mark></p>
<p>FFN 通常是一个由两个线性层（全连接层）和它们之间的一个非线性激活函数组成的小网络。它作用于序列中的<strong>每一个位置（Position-wise）</strong>。</p>
<pre class="arithmatex">\[
\text{FFN}(x) = \text{Linear}_2(\text{ReLU}(\text{Linear}_1(x)))
\]</pre>
<p>或者用权重和偏置更详细地表示：</p>
<pre class="arithmatex">\[
\text{FFN}(x) = \max(0, xW_1 + b_1)W_2 + b_2
\]</pre>
<p>这里有几个关键点：
*   <strong>Position-wise</strong>: 这个 FFN 是独立地应用于序列中每个 token 的表示向量上的。也就是说，所有位置的 token 共享同一套 FFN 的权重（<span class="arithmatex">\(W_1, b_1, W_2, b_2\)</span>），但每个 token 的计算是独立的，不与其他 token 发生信息交换。
*   <strong>维度变换</strong>:
    *   第一个线性层 <code>Linear_1</code> 通常会将输入的维度 <span class="arithmatex">\(d_{model}\)</span> 扩展到一个更高的维度 <span class="arithmatex">\(d_{ff}\)</span>（在原始 Transformer 论文中，<span class="arithmatex">\(d_{model}=512, d_{ff}=2048\)</span>，是4倍关系）。
    *   第二个线性层 <code>Linear_2</code> 再把维度从 <span class="arithmatex">\(d_{ff}\)</span> 投影回 <span class="arithmatex">\(d_{model}\)</span>。</p>
<p>这种 <strong>“扩展-&gt;非线性激活-&gt;压缩”</strong> 的结构非常巧妙。我们可以把它理解为一个<strong>特征提炼器</strong>或<strong>信息处理中心</strong>。</p>
<p><mark>来自Gemini的比喻：会议室里的讨论与个人思考</mark></p>
<p>我们可以把一个 Transformer Block 想象成一次高效的会议决策过程：</p>
<ol>
<li>
<p><strong>多头注意力层 (Multi-Head Attention)</strong>：这相当于会议的<strong>全员讨论环节</strong>。每个人（token）都会听取所有其他与会者的发言（Values），并根据与自己的相关性（Q-K 匹配度）来决定重点吸收哪些信息。会议讨论结束后，每个人脑子里都形成了一个融合了全场信息的、新的综合性想法（Attention Output）。</p>
</li>
<li>
<p><strong>前馈神经网络 (Feed-Forward Network)</strong>：这相当于会议讨论后的<strong>个人独立思考和整理环节</strong>。每个人回到自己的工位上，对自己刚刚吸收到的海量综合信息进行处理。</p>
<ul>
<li><strong>扩展（Up-project to <span class="arithmatex">\(d_{ff}\)</span>）</strong>：他/她会把这个综合性想法发散开，在脑内一个更广阔的“思维空间”里，去分析和联想所有可能的方面和潜在的特征组合。</li>
<li><strong>非线性激活（ReLU/GELU）</strong>：在这个过程中，他/她会过滤掉那些不重要、不相关或者冗余的想法（比如 ReLU 会将负值部分直接置为0）。</li>
<li><strong>压缩（Down-project to <span class="arithmatex">\(d_{model}\)</span>）</strong>：最后，他/她把这些经过深思熟虑、筛选和提炼后的精华观点，重新总结成一个标准格式的、清晰的结论（变回 <span class="arithmatex">\(d_{model}\)</span> 维度），准备提交给下一轮会议（下一个 Transformer Block）。</li>
</ul>
</li>
</ol>
<p><mark>总结：为什么必须有 FFN？</mark></p>
<ul>
<li>
<p><strong>从功能互补上看</strong>：Attention 层负责在序列内的不同 token 之间<strong>横向交换和聚合信息</strong>。而 FFN 层则负责对每个 token 自身的表示进行<strong>纵向的深度加工和非线性变换</strong>。两者分工明确，缺一不可。Attention 负责“沟通”，FFN 负责“计算/思考”。</p>
</li>
<li>
<p><strong>从模型能力上看</strong>：没有 FFN，Transformer 就失去了深度学习模型最关键的非线性建模能力，其性能将大打折扣。FFN 提供的维度扩展和非线性激活，极大地增强了模型的参数容量和拟合复杂函数的能力。</p>
</li>
</ul>
<p><mark>FFN 和 Attention 是 Transformer 中相辅相成的两个核心组件。Attention 解决了长距离依赖和信息交互问题，而 FFN 则赋予了模型强大的非线性表示学习能力</mark>，使得对这些交互信息进行深度加工成为可能。</p>
</div>
<h2 id="multi-head-attention-mha">Multi-Head Attention (MHA)<a class="headerlink" href="#multi-head-attention-mha" title="Permanent link">⚓︎</a></h2>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/SmilingWayne/picsrepo/202509100218070.png" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">MultiHeadAttentionBlock</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d_model</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">h</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dropout</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">d_model</span> <span class="o">=</span> <span class="n">d_model</span> <span class="c1"># Embedding vector size</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="c1"># Number of heads, 不同头的数量</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>        <span class="c1"># Make sure d_model is divisible by h</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>        <span class="k">assert</span> <span class="n">d_model</span> <span class="o">%</span> <span class="n">h</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;d_model is not divisible by h&quot;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">d_k</span> <span class="o">=</span> <span class="n">d_model</span> <span class="o">//</span> <span class="n">h</span> <span class="c1"># Dimension of vector seen by each head</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">w_q</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">d_model</span><span class="p">,</span> <span class="n">d_model</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># Wq (batch, d_model, d_model)</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">w_k</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">d_model</span><span class="p">,</span> <span class="n">d_model</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># Wk</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">w_v</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">d_model</span><span class="p">,</span> <span class="n">d_model</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># Wv</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">w_o</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">d_model</span><span class="p">,</span> <span class="n">d_model</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># Wo</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dropout</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Dropout</span><span class="p">(</span><span class="n">dropout</span><span class="p">)</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>        <span class="c1"># 每个头都只能看到对应的向量 (embedding 的部分)</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">attention</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">dropout</span><span class="p">:</span> <span class="n">nn</span><span class="o">.</span><span class="n">Dropout</span><span class="p">):</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>        <span class="n">d_k</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>        <span class="c1"># Just apply the formula from the paper</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>        <span class="c1"># (batch, h, seq_len, d_k) --&gt; (batch, h, seq_len, seq_len)</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>        <span class="n">attention_scores</span> <span class="o">=</span> <span class="p">(</span><span class="n">query</span> <span class="o">@</span> <span class="n">key</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">d_k</span><span class="p">)</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>        <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>            <span class="c1"># Write a very low value (indicating -inf) to the positions where mask == 0</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>            <span class="n">attention_scores</span><span class="o">.</span><span class="n">masked_fill_</span><span class="p">(</span><span class="n">mask</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1e9</span><span class="p">)</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>        <span class="n">attention_scores</span> <span class="o">=</span> <span class="n">attention_scores</span><span class="o">.</span><span class="n">softmax</span><span class="p">(</span><span class="n">dim</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># (batch, h, seq_len, seq_len) # Apply softmax</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>        <span class="k">if</span> <span class="n">dropout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>            <span class="n">attention_scores</span> <span class="o">=</span> <span class="n">dropout</span><span class="p">(</span><span class="n">attention_scores</span><span class="p">)</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>        <span class="c1"># (batch, h, seq_len, seq_len) --&gt; (batch, h, seq_len, d_k)</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>        <span class="c1"># return attention scores which can be used for visualization</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>        <span class="k">return</span> <span class="p">(</span><span class="n">attention_scores</span> <span class="o">@</span> <span class="n">value</span><span class="p">),</span> <span class="n">attention_scores</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">mask</span><span class="p">):</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">w_q</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="c1"># (batch, seq_len, d_model) --&gt; (batch, seq_len, d_model)</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">w_k</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="c1"># (batch, seq_len, d_model) --&gt; (batch, seq_len, d_model)</span>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">w_v</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># (batch, seq_len, d_model) --&gt; (batch, seq_len, d_model)</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>        <span class="c1"># (batch, seq_len, d_model) --&gt; (batch, seq_len, h, d_k) --&gt; (batch, h, seq_len, d_k)</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>        <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">query</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_k</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>        <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">key</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_k</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_k</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>        <span class="c1"># Calculate attention</span>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>        <span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attention_scores</span> <span class="o">=</span> <span class="n">MultiHeadAttentionBlock</span><span class="o">.</span><span class="n">attention</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropout</span><span class="p">)</span>
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>        <span class="c1"># Combine all the heads together</span>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>        <span class="c1"># (batch, h, seq_len, d_k) --&gt; (batch, seq_len, h, d_k) --&gt; (batch, seq_len, d_model)</span>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">contiguous</span><span class="p">()</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_k</span><span class="p">)</span>
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a>        <span class="c1"># Multiply by Wo</span>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>        <span class="c1"># (batch, seq_len, d_model) --&gt; (batch, seq_len, d_model)  </span>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">w_o</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
<h3 id="functionality-what-for">Functionality / What for?<a class="headerlink" href="#functionality-what-for" title="Permanent link">⚓︎</a></h3>
<div class="admonition question">
<p class="admonition-title">注意力层的本质功能/本质作用是什么？</p>
<p>注意力层的作用是，<strong>为句子中的每个词动态地生成一个“上下文相关的”表示</strong>，<u>其方法是计算这个词与句子中所有其他词的相关性分数，并据此对所有词的信息进行加权求和</u>。</p>
<p>比如，公式 <span class="arithmatex">\(\text{softmax} (\dfrac{QK^T}{\sqrt{d_k}}) V\)</span>，每一步的作用：</p>
<ol>
<li><strong>计算相关性</strong>：当前词的 Query 会和所有词的 Key 进行一次匹配计算（通常是点积），得出一个“相关性分数”。这个分数越高，说明这个词与当前词越相关。</li>
<li><strong>权重归一化</strong>：使用 Softmax 函数将这些分数转换成一组总和为1的权重。这些权重就是“注意力分布”。</li>
<li><strong>加权求和</strong>：用这些权重去乘以所有词对应的 Value，然后把它们加起来。</li>
</ol>
<blockquote>
<p>其优势功能是：</p>
<p><strong>捕获长距离依赖</strong>: 任何两个词之间都可以直接计算相关性，彻底解决了RNN的序列距离问题。</p>
<p><strong>生成上下文相关的动态表示</strong>: 一个词的最终表示不再是固定的，而是根据它所在的句子动态生成的。这是解决一词多义等问题的关键。</p>
<p><strong>赋予模型可解释性</strong>: 通过可视化注意力权重，我们可以直观地看到模型在做决策时，重点关注了哪些输入部分，这为我们理解模型行为提供了窗口。</p>
</blockquote>
</div>
<div class="admonition question">
<p class="admonition-title">为什么需要用 Q, K, V 三个完全独立的参数矩阵？</p>
<p>简单来说，核心目的是：<strong>解耦和增强模型的表达能力，让输入序列中的每个元素（Token）能够扮演不同的角色</strong>。这三个矩阵将同一段输入映射到了三个不同的文本向量空间中，因为在注意力机制中，同一段文本作为 Query，key 和 Value 的含义是不同的，自然需要不同的向量空间去划分。</p>
<p>下面我们来详细拆解这个答案。</p>
<p><mark>1. 核心思想：赋予输入信息不同的“角色”</mark></p>
<ul>
<li><span class="arithmatex">\(W_Q\)</span>： 将输入向量投影到 <strong>“查询空间”</strong>。它的任务是<strong>刻画当前位置（如一个词）的“意图”或“需求”</strong>。例如，句子中的动词“吃”可能会产生一个寻找“食物”相关信息的Query。</li>
<li><span class="arithmatex">\(W_K\)</span>： 将输入向量投影到 <strong>“键空间”</strong>。它的任务是<strong>刻画每个位置（如一个词）的“身份”或“特征”</strong>，用于被Query匹配。例如，“苹果”这个词作为Key时，可能会突出其作为“水果”的特征。</li>
<li>
<p><span class="arithmatex">\(W_V\)</span>： 将输入向量投影到 <strong>“值空间”</strong>。它的任务是<strong>刻画每个位置所包含的“信息”或“内容”</strong>，这是最终被聚合的实际数据。例如，“苹果”这个词作为Value时，可能包含其词义、语法角色等更丰富的信息。</p>
</li>
<li>
<p><strong>为什么需要不同的空间？</strong>
因为一个词的“身份特征”（Key）和它所要提供的“信息内容”（Value）可能侧重点不同。同样，它的“需求”（Query）也和它的“身份”（Key）不同。独立的投影使得模型可以<strong>分别学习和优化这三种不同的表示</strong>，极大地增强了模型的容量和灵活性。</p>
</li>
</ul>
<p>想象一下你在图书馆查资料的场景：</p>
<ul>
<li>你脑子里想的问题是 <strong>查询（Query）</strong>。</li>
<li>为了找到相关的书，你会去看书架上每本书的 <strong>索引或标签（Key）</strong>。</li>
<li>当你找到一本书，你真正要阅读的是书本的 <strong>内容（Value）</strong>。</li>
</ul>
<p>在自注意力（Self-Attention）机制中，输入序列里的每个词（Token）都需要同时扮演这三种角色：
1.  <strong>作为查询者（Query）</strong>：它要去“询问”序列中其他所有词，哪些词和“我”最相关。
2.  <strong>作为被查询者（Key）</strong>：它要“告诉”序列中其他所有词，“我”这里有什么样的信息可供匹配。
3.  <strong>作为内容贡献者（Value）</strong>：它包含了这个词本身所携带的真正信息。如果别的词注意到“我”，我就把这些信息传递过去。</p>
<p>如果 Q, K, V 是完全相同的（即都使用原始的词嵌入向量 <span class="arithmatex">\(x\)</span>），那么一个词“查询”和“被查询”的表示就是完全一样的。这极大地限制了模型的灵活性。</p>
<p>通过引入三个独立的、可学习的权重矩阵 <span class="arithmatex">\(W^Q, W^K, W^V\)</span>，我们可以将原始的输入嵌入向量 <span class="arithmatex">\(X\)</span> 投影到三个不同的子空间中，从而得到 <span class="arithmatex">\(Q, K, V\)</span> 矩阵：</p>
<pre class="arithmatex">\[
Q = XW^Q
\]</pre>
<pre class="arithmatex">\[
K = XW^K
\]</pre>
<pre class="arithmatex">\[
V = XW^V
\]</pre>
<p>这里的 <span class="arithmatex">\(X\)</span> 是输入序列的嵌入矩阵，每一行代表一个词的嵌入向量。<span class="arithmatex">\(W^Q, W^K, W^V\)</span> 就是我们在训练过程中要学习的参数。</p>
<p><mark>4. 分开的目的和带来的好处</mark></p>
<p>将 Q, K, V 分开，主要有以下两大好处：</p>
<ul>
<li>A. 极大地增强了模型的表达能力和灵活性</li>
</ul>
<p>这体现在两个方面：</p>
<ol>
<li>
<p><strong>不同的相似度计算方式</strong>：注意力得分（Attention Score）是通过 Query 和 Key 的点积来计算的（<span class="arithmatex">\(\text{score} = Q \cdot K^T\)</span>）。如果 <span class="arithmatex">\(Q=K\)</span>，那么相似度计算就变成了向量和自身的点积，衡量的更多是“能量”大小，而不是两个不同视角下的“相关性”。</p>
<ul>
<li><strong>举个例子</strong>：在句子 "The animal didn't cross the street because <strong>it</strong> was too tired" 中，我们希望代词 <code>it</code> 能注意到 <code>animal</code>。</li>
<li><code>it</code> 作为 <strong>Query</strong>，它的任务是“我要找我指代的是谁”。</li>
<li><code>animal</code> 作为 <strong>Key</strong>，它的任务是“我是一个名词，可以被指代”。</li>
<li><code>the</code> 作为 <strong>Key</strong>，它的任务可能是“我是一个冠词，限定后面的名词”。</li>
<li>通过独立的 <span class="arithmatex">\(W^Q\)</span> 和 <span class="arithmatex">\(W^K\)</span> 矩阵，模型可以学习到让 <code>it</code> 的 <span class="arithmatex">\(q\)</span> 向量和 <code>animal</code> 的 <span class="arithmatex">\(k\)</span> 向量在语义上非常接近，从而产生高的注意力分数，而与其他词（如 <code>the</code>, <code>street</code>）的 <span class="arithmatex">\(k\)</span> 向量相距较远。如果 Q 和 K 表示相同，这种灵活的、非对称的匹配关系就很难学习到。</li>
</ul>
</li>
<li>
<p><strong>解耦了“寻找谁”和“提供什么”</strong>：</p>
<ul>
<li><strong><code>Q-K</code> 的交互决定了注意力权重</strong>：即 “应该关注谁，关注多少”。这相当于一个路由或寻址的过程。</li>
<li><strong><code>V</code> 决定了聚合的信息内容</strong>：即 “从被关注的对象那里，应该获取什么信息”。</li>
<li>将 K 和 V 分开至关重要。一个词可能因为某个特征（Key）被注意到，但我们希望从中提取的信息（Value）却是另一个维度的。</li>
<li><strong>继续上面的例子</strong>：<code>it</code> 注意到了 <code>animal</code>（通过 Q-K 匹配）。现在 <code>it</code> 需要从 <code>animal</code> 那里获取信息来更新自身的表示。<code>animal</code> 的 <span class="arithmatex">\(v\)</span> 向量可能就包含了“这是一只动物”的丰富语义信息，而不是它作为“被指代对象”的语法功能信息。模型通过 <code>V</code> 将 <code>animal</code> 的语义内容传递给 <code>it</code>，使得 <code>it</code> 的新表示中融合了 <code>animal</code> 的含义。如果 K=V，那么模型用来判断相关性的信息和最终要提取的信息就被绑定在了一起，不够灵活。</li>
</ul>
</li>
</ol>
<p><span style="color:red">3. 数学公式回顾</span></p>
<p>让我们回顾一下 Scaled Dot-Product Attention 的完整公式，来巩固这个理解：</p>
<pre class="arithmatex">\[
\text{Attention}(Q, K, V) = \text{softmax}(\frac{QK^T}{\sqrt{d_k}})V
\]</pre>
<p>这个公式的计算过程清晰地体现了 Q, K, V 的不同作用：
3.  <strong>计算得分</strong>：<span class="arithmatex">\(QK^T\)</span> 计算每个 Query 对所有 Key 的注意力得分。
4.  <strong>缩放</strong>：除以 <span class="arithmatex">\(\sqrt{d_k}\)</span> （<span class="arithmatex">\(d_k\)</span>是 Key 向量的维度）是为了在训练时获得更稳定的梯度。
5.  <strong>归一化</strong>：<code>softmax</code> 操作将得分转换成一个概率分布，所有 Key 的权重之和为 1。
6.  <strong>加权求和</strong>：将得到的权重应用到 <code>Value</code> 矩阵上，对所有的 <span class="arithmatex">\(v\)</span> 向量进行加权求和，得到最终的输出。</p>
<p>当面试官问到这个问题时，你可以这样组织你的回答：</p>
<ol>
<li><strong>先给结论</strong>：使用三个独立的矩阵 Q, K, V 是为了增加模型的表达能力和灵活性，让同一个输入词能在注意力计算中扮演三个不同的角色：查询者（Query）、被查询者（Key）和内容贡献者（Value）。</li>
<li><strong>解释角色</strong>：用一个通俗易懂的例子（如图书馆查资料）来解释 Q, K, V 的含义。</li>
<li><strong>阐述分离的好处 (核心)</strong>：<ul>
<li><strong>表达灵活性</strong>：<span class="arithmatex">\(W^Q\)</span> 和 <span class="arithmatex">\(W^K\)</span> 将输入投影到不同的空间，使得模型可以学习非对称的相关性。比如代词 <code>it</code> (Query) 和它指代的名词 <code>animal</code> (Key) 之间的关系。</li>
<li><strong>解耦</strong>：最关键的一点是解耦。<code>Q-K</code> 的交互决定了<strong>注意力权重（关注谁）</strong>，而 <code>V</code> 决定了<strong>要提取的信息内容（拿什么）</strong>。这种解耦让模型可以因为 A 原因关注某个词，但提取 B 内容，这是非常强大的能力。</li>
</ul>
</li>
<li><strong>(加分项) 如果不分开会怎样</strong>：简单提一下，如果 Q=K=V，模型就只能计算原始嵌入向量之间的相似度，并聚合这些原始向量，这大大限制了模型捕捉复杂上下文依赖关系的能力。</li>
</ol>
</div>
<h3 id="why-multi-head">Why Multi-Head?<a class="headerlink" href="#why-multi-head" title="Permanent link">⚓︎</a></h3>
<div class="admonition question">
<p class="admonition-title">为什么需要多个头？</p>
<p><mark>简单来说，<strong>多头注意力（Multi-Head Attention）机制允许模型在不同的表示子空间中，从不同的角度同时关注信息。</strong> 这极大地增强了注意力层的建模能力。</mark></p>
<p>Gemini 提供的一个生动的比喻：</p>
<p>单头 vs. 多头：一个专家 vs. 专家委员会</p>
<ul>
<li>
<p><strong>单头注意力（Single-Head Attention）</strong>：就像你只请了一位<strong>语法专家</strong>来阅读一个句子。当他读到 "The animal didn't cross the street because <strong>it</strong> was too tired" 时，他可能会根据语法规则，非常准确地将 <code>it</code> 和 <code>animal</code> 联系起来（主语和代词的指代关系）。但他可能不会特别关注 <code>tired</code> 和 <code>animal</code> 之间的描述关系。他的注意力模式是单一的，被他唯一的专业视角所主导。</p>
</li>
<li>
<p><strong>多头注意力（Multi-Head Attention）</strong>：这相当于你组织了一个<strong>专家委员会</strong>。</p>
<ul>
<li><strong>Head 1 (语法专家)</strong>：专注于 <code>it</code> -&gt; <code>animal</code> 的指代关系。</li>
<li><strong>Head 2 (语义专家)</strong>：专注于 <code>tired</code> -&gt; <code>animal</code> 的状态描述关系。</li>
<li><strong>Head 3 (上下文专家)</strong>：可能会关注 <code>street</code> 和 <code>cross</code> 之间的动作-地点关系。</li>
<li><strong>Head 4 (否定关系专家)</strong>：可能会关注 <code>didn't</code> 对整个句子语义的翻转。</li>
<li>...等等。</li>
</ul>
</li>
</ul>
<p>每个“头”都是一个独立的专家，有自己的一套 Q, K, V 权重矩阵。它们并行工作，各自从不同的“表示子空间”中提取信息，并形成自己的注意力结论。</p>
<p>🤔：<span style="color:red">为什么单头不够好？</span></p>
<p>单头注意力的主要局限性在于 <strong>“平均化效应”</strong>。</p>
<p><mark>因为它只有一套 <span class="arithmatex">\(W^Q, W^K, W^V\)</span> 矩阵，它必须学习一种“万金油”式的注意力模式，试图同时兼顾语法、语义、指代等所有可能的关系。这会导致它的注意力可能不够“专注”和“尖锐”</mark>。模型可能会学习到一种将所有类型的相关性都混合在一起的平均表示，而不是针对特定关系形成清晰的连接。这限制了模型捕捉句子中多样化、多维度特征的能力。</p>
<p>🤔 <span style="color:red">多头如何工作？以及拼接的目的？</span></p>
<p>多头注意力的工作流程非常清晰，这也解释了为什么需要最后一步的拼接和线性变换。</p>
<p>假设我们有 <span class="arithmatex">\(h\)</span> 个头（例如，在 Transformer Base 模型中 <span class="arithmatex">\(h=8\)</span>），模型的维度是 <span class="arithmatex">\(d_{model}\)</span>（例如 512）。每个头有独立的参数。</p>
<ol>
<li>
<ul>
<li>首先，模型为每个头 <span class="arithmatex">\(i\)</span>（从 1 到 <span class="arithmatex">\(h\)</span>）创建<strong>三组独立</strong>的权重矩阵：<span class="arithmatex">\(W^Q_i, W^K_i, W^V_i\)</span>。</li>
<li>然后，将原始的输入嵌入 <span class="arithmatex">\(X\)</span> 分别通过这些权重矩阵，为每个头生成各自的 <span class="arithmatex">\(Q_i, K_i, V_i\)</span>。</li>
<li>通常，我们会把原始的 <span class="arithmatex">\(d_{model}\)</span> 维度切分开。每个头的 Q, K, V 向量维度会是 <span class="arithmatex">\(d_k = d_v = d_{model} / h\)</span>。例如，512 维的输入，分成 8 个头，每个头就在一个 64 维的子空间里进行计算。</li>
</ul>
<p><strong>投影/分裂（Projection/Splitting）</strong>：</p>
<pre class="arithmatex">\[
Q_i = XW^Q_i, \quad K_i = XW^K_i, \quad V_i = XW^V_i
\]</pre>
</li>
<li>
<p><strong>并行计算注意力（Parallel Attention Calculation）</strong>：</p>
<ul>
<li>每个头都独立地、并行地执行标准的 Scaled Dot-Product Attention 计算，得到各自的输出 <code>head_i</code>。</li>
</ul>
<pre class="arithmatex">\[
\text{head}_i = \text{Attention}(Q_i, K_i, V_i) = \text{softmax}(\frac{Q_i K_i^T}{\sqrt{d_k}})V_i
\]</pre>
<p>这一步就是“专家委员会”里每个专家独立工作，产出各自的分析报告。</p>
</li>
<li>
<p><strong>拼接与线性变换（Concatenation &amp; Final Linear Projection）</strong>：</p>
<ul>
<li>
<p><strong>拼接(Concatenation)</strong>：将所有 <span class="arithmatex">\(h\)</span> 个头的输出 <code>head_i</code> 在维度上拼接起来。</p>
<pre class="arithmatex">\[
\text{Concat}(\text{head}_1, \text{head}_2, ..., \text{head}_h)
\]</pre>
<p>拼接后的矩阵维度又恢复到了 <span class="arithmatex">\(d_{model}\)</span> (<span class="arithmatex">\(h \times d_v = h \times (d_{model}/h) = d_{model}\)</span>)。此时，我们得到的是一个包含了所有专家独立意见的“汇总文件包”。</p>
</li>
<li>
<p><mark><strong>最终线性变换（Final Linear Projection）</strong>：<strong>这是你问题的关键！</strong> 仅仅拼接是不够的，因为那只是把各个子空间的结果简单地并排放在一起。我们需要一个机制来<strong>整合和融合</strong>这些来自不同子空间的信息</mark>。</p>
<ul>
<li>模型引入了一个额外的、可学习的权重矩阵 <span class="arithmatex">\(W^O\)</span>（输出权重矩阵）。</li>
<li>将拼接后的矩阵乘以这个 <span class="arithmatex">\(W^O\)</span>，得到多头注意力的最终输出。</li>
</ul>
<pre class="arithmatex">\[
\text{MultiHead}(Q, K, V) = \text{Concat}(\text{head}_1, ..., \text{head}_h)W^O
\]</pre>
<p>这个 <span class="arithmatex">\(W^O\)</span> 矩阵的作用就像是“<strong>委员会主席</strong>”。它查看所有专家（头）的报告，并学习如何将它们智能地组合起来。它会决定在当前的上下文中，哪个专家的意见更重要，哪个次要，以及如何将这些不同的意见（特征）融合成一个统一、连贯、信息更丰富的最终表示。</p>
</li>
</ul>
</li>
</ol>
<hr />
<ol>
<li><strong>核心目的</strong>：多头注意力机制的核心目的是让模型能够<strong>从不同的表示子空间、从不同的角度去关注信息</strong>，从而更全面地捕捉数据中的多样化特征。</li>
<li><strong>单头的局限</strong>：单头注意力容易产生“平均效应”，难以同时学习多种不同类型的依赖关系。</li>
<li><strong>多头的工作方式</strong>：通过为每个头设置独立的 <span class="arithmatex">\(W^Q, W^K, W^V\)</span> 矩阵，将原始表示投影到多个子空间中，并行计算注意力。</li>
<li><strong>拼接与最终投影的目的</strong>：拼接是把各个头独立计算的结果收集起来。而最后的线性投影层（<span class="arithmatex">\(W^O\)</span>）是至关重要的，它负责<strong>融合</strong>所有头的信息，学习如何智能地组合这些从不同角度提取的特征，生成一个统一且更丰富的输出表示。它不是简单的相加，而是一种可学习的、加权的组合。</li>
</ol>
</div>
<h3 id="softmax-usage">Softmax: usage<a class="headerlink" href="#softmax-usage" title="Permanent link">⚓︎</a></h3>
<p><strong>Softmax 确保注意力分数转换为有效的概率分布，所有值都在 0 到 1 之间，总和等于 1。此属性对于正确权衡输入标记，同时考虑其相对重要性非常重要。</strong></p>
<p>总之，softmax 函数是 Transformer 的重要组成部分，它使它们能够学习如何根据输入标记与当前上下文的相关性来加权输入标记，从而使模型的自注意力机制有效地捕获数据中的依赖关系和关系</p>
<h2 id="cross-self-attention">Cross / Self-Attention<a class="headerlink" href="#cross-self-attention" title="Permanent link">⚓︎</a></h2>
<div class="admonition question">
<p class="admonition-title">问题1：为什么一定要用交叉注意力？它的作用是什么？</p>
<p>在经典的 Encoder-Decoder Transformer 架构（例如用于机器翻译、文本摘要的模型）中，<strong>交叉注意力（Cross-Attention）是不可或缺的，它的核心作用是充当编码器（Encoder）和解码器（Decoder）之间的桥梁，实现两个不同序列之间的信息对齐和传递。</strong></p>
<p>让我们把它放在具体的场景里来理解：</p>
<p>假设我们在做一个中译英的任务：“我是一个学生” -&gt; "I am a student"。</p>
<ol>
<li>
<p><strong>编码器（Encoder）的工作</strong>：</p>
<ul>
<li>Encoder 接收中文输入序列 "我", "是", "一个", "学生"。</li>
<li>通过其内部的自注意力（Self-Attention）层，它会充分理解这个中文句子内部的依赖关系，并为每个词生成一个富含上下文信息的表示（representation）。</li>
<li>Encoder 的最终输出是一个包含了整个源句子信息的向量序列，我们称之为 <span class="arithmatex">\(H_{enc}\)</span>。这个 <span class="arithmatex">\(H_{enc}\)</span> 就相当于对整个中文句子的“深度理解”或“知识库”。</li>
</ul>
</li>
<li>
<p><strong>解码器（Decoder）的工作</strong>：</p>
<ul>
<li>Decoder 的任务是逐词生成英文目标序列。比如，当它已经生成了 "I", "am" 之后，它需要决定下一个词是什么。</li>
<li>此时，Decoder 需要参考两个方面的信息：<ul>
<li><strong>已经生成的部分</strong>：它需要看看自己已经写了 "I am"，这通过 Decoder 内部的<strong>带掩码的自注意力（Masked Self-Attention）</strong>来实现。</li>
<li><strong>原始的中文句子</strong>：它必须回头看中文原文，才能知道接下来该翻译哪个部分。这就是<strong>交叉注意力</strong>发挥作用的地方！</li>
</ul>
</li>
</ul>
</li>
</ol>
</div>
<h3 id="mechanism-of-cross-attention">Mechanism of Cross Attention<a class="headerlink" href="#mechanism-of-cross-attention" title="Permanent link">⚓︎</a></h3>
<p>在 Decoder 的交叉注意力层：
*   <strong>Query (Q)</strong>: 来自于 <strong>Decoder</strong> 的前一个输出。它代表了 Decoder 当前的状态，相当于在提问：“根据我已经生成的 'I am'，接下来我最应该关注原文中的哪个部分来生成下一个词？”
*   <strong>Key (K) 和 Value (V)</strong>: 来自于 <strong>Encoder 的最终输出</strong> (<span class="arithmatex">\(H_{enc}\)</span>)。它们代表了源句子（中文）的完整信息库。Key 用于和 Query 匹配，Value 包含了要提取的实际信息。</p>
<pre class="arithmatex">\[
\text{CrossAttention}(Q_{dec}, K_{enc}, V_{enc}) = \text{softmax}(\frac{Q_{dec}K_{enc}^T}{\sqrt{d_k}})V_{enc}
\]</pre>
<p>所以，交叉注意力的整个过程就是：Decoder 在生成每一个词的时候，都会用自己的当前状态（Q）去“查询”一遍 Encoder 提供的完整上下文（K 和 V），然后有选择性地、动态地“聚焦”在源句子中最相关的部分，并将这些信息提取出来用于生成下一个词。</p>
<p>比如在生成 <code>a</code> 的时候，交叉注意力可能会让模型高度关注中文的 <code>一个</code>；在生成 <code>student</code> 的时候，高度关注 <code>学生</code>。</p>
<div class="admonition question">
<p class="admonition-title">Transformer 中，这三个矩阵为什么不能被取代？</p>
<p>在 Encoder-Decoder 架构中，这个信息桥梁的功能是必须的。在 Transformer 出现之前，RNN/LSTM 类的 Seq2Seq 模型试图用一个<strong>固定长度的向量（context vector）</strong>来压缩整个源句子的信息，这就是一个巨大的<strong>信息瓶颈</strong>。无论源句子多长、多复杂，都必须被压缩成同一个大小的向量，这必然会导致信息丢失。</p>
<p>交叉注意力机制通过允许 Decoder 在每一步都直接访问 Encoder 的所有输出，彻底解决了这个瓶颈问题。因此，可以说在<strong>这种架构范式下，交叉注意力是目前最优且核心的解决方案，很难被其他机制以同等效率和效果取代</strong>。</p>
</div>
<hr />
<div class="admonition question">
<p class="admonition-title">问题2：Decoder-Only 架构与交叉注意力的关系</p>
<p>这个问题的追问是，现在更多的大模型是 Decoder- Only架构的了，那么他们是不是就很少用到交叉注意力机制，而单纯地是在原先自注意力机制上进行调整优化，比如Flash Attention，Linear Attention，Sparse Attention？</p>
<p><strong>是的，像 GPT 系列、LLaMA、PaLM 这类主流的大语言模型（LLM）都是 Decoder-Only 架构，它们在其核心的预训练和生成任务中，确实不使用交叉注意力机制。</strong></p>
</div>
<h3 id="no-cross-attention-for-decoder-only">NO Cross Attention for Decoder-Only!<a class="headerlink" href="#no-cross-attention-for-decoder-only" title="Permanent link">⚓︎</a></h3>
<p>因为它们的工作模式和任务定义与 Encoder-Decoder 模型完全不同。</p>
<ul>
<li><strong>Encoder-Decoder 模型</strong>：处理的是 <strong>输入序列 A -&gt; 输出序列 B</strong> 的任务，比如翻译（中文 -&gt; 英文）、摘要（长文章 -&gt; 短摘要）。这里有两个明确区分的序列，所以需要一个机制（交叉注意力）来连接它们。</li>
<li><strong>Decoder-Only 模型</strong>：处理的是 <strong><code>prompt</code> -&gt; <code>completion</code></strong> 的任务。从模型的角度看，这并不是两个独立的序列。<code>prompt</code>（提示）和 <code>completion</code>（补全）被拼接成一个<strong>单一的、连续的序列</strong>。模型的唯一任务就是根据前面的所有 token，预测下一个 token。</li>
</ul>
<p>例如，当你给 GPT 输入 <code>中国的首都是</code>，并让它补全时，对于模型来说，它的输入序列就是 <code>["中国", "的", "首都", "是"]</code>。它的任务是预测第五个 token，它会通过<strong>自注意力（Self-Attention）</strong>机制来关注前面这四个 token，然后生成 <code>北</code>。接着，序列变成 <code>["中国", "的", "首都", "是", "北"]</code>，模型再根据这五个 token 预测下一个 <code>京</code>。</p>
<p>在这个过程中，始终只有一个序列在不断增长，模型也只关注这个序列自身内部的关系，所以只需要<strong>自注意力</strong>就足够了。</p>
<div class="admonition question">
<p class="admonition-title">Decoder Only 架构模型优化重点的转移</p>
</div>
<p>由于 Decoder-Only 模型完全依赖于自注意力，并且处理的序列长度（Context Window）越来越长（从 2k 到 4k，再到 32k，甚至 1M+），自注意力机制的平方复杂度（<span class="arithmatex">\(O(N^2)\)</span>，其中 <span class="arithmatex">\(N\)</span> 是序列长度）成为了最主要的性能瓶颈。</p>
<p>因此，学术界和工业界的研究重点自然就转向了<strong>如何优化自注意力机制本身</strong>。你提到的几个例子都非常典型：</p>
<ul>
<li><strong>FlashAttention</strong>：这是一个里程碑式的工作。它本身没有改变注意力的数学计算，而是一种 I/O 感知的算法，通过优化 GPU 内存（SRAM 和 HBM）之间的数据读写，避免了反复读取完整的 <span class="arithmatex">\(N \times N\)</span> 注意力矩阵，从而在不牺牲精度的情况下，极大地提升了计算速度并减少了内存占用。这是目前长序列训练和推理的标配。</li>
<li><strong>Linear Attention / Sparse Attention</strong>：这些是<strong>近似</strong>注意力的方法。它们试图通过修改注意力的计算方式来降低复杂度。<ul>
<li><code>Sparse Attention</code>：认为不是每个 token都需要关注所有其他 token，因此只计算部分重要的 Q-K 对的得分，比如只关注相邻的或者一些全局的 token。</li>
<li><code>Linear Attention</code>：通过数学变换（如核函数）将 <span class="arithmatex">\(softmax(QK^T)V\)</span> 的计算顺序改变，使其复杂度降低到线性级别 <span class="arithmatex">\(O(N)\)</span>。</li>
</ul>
</li>
</ul>
<p><strong>一个重要的例外</strong>：虽然纯文本的 Decoder-Only 模型不用交叉注意力，但在<strong>多模态（Multi-modal）</strong>领域，交叉注意力又重新焕发了生机！例如，对于一个看图说话的模型（输入图片，输出文字描述），模型可能会使用：
*   一个 Vision Encoder（如 ViT）来处理图片，得到图片的特征表示。
*   一个 Text Decoder（类似 GPT）来生成文字。
*   在 Text Decoder 中，会加入<strong>交叉注意力层</strong>，让文本在生成时能够“看”到（attend to）图片编码器的输出特征。这和经典的 Encoder-Decoder 架构在思想上是一脉相承的。</p>
<hr />
<h2 id="masked-self-attention-why-masked">Masked Self Attention (Why masked?)<a class="headerlink" href="#masked-self-attention-why-masked" title="Permanent link">⚓︎</a></h2>
<p>核心原因有两个：<strong>模拟真实生成过程</strong>和<strong>防止数据泄露</strong>。</p>
<p>在像机器翻译、文本生成这样的任务中，Decoder 的作用是<strong>自回归 (Auto-regressive)</strong> 地一个词一个词地生成目标序列。</p>
<p>我们来想象一个翻译任务的场景：将 "I am a student" 翻译成 "我 是 一个 学生"。</p>
<ol>
<li>
<p><strong>训练阶段 (Training):</strong>
    在训练时，我们为了高效，会把完整的德语目标序列 "我 是 一个 学生" <code>(&lt;eos&gt;)</code> 一次性喂给 Decoder。模型的任务是，<strong>在输入了 "我" 之后，能预测出 "是"；在输入了 "我 是" 之后，能预测出 "一个"，以此类推</strong>。</p>
<p>现在问题来了：如果没有 Mask，当模型在预测第3个位置的词 "一个" 时，它的 Self-Attention 机制能够看到完整的输入序列，包括它应该预测的 "一个" 和后面的 "学生"。</p>
<p>这就相当于<strong>开卷考试</strong>，模型可以直接"抄袭"后面的答案，而没有真正学会根据上文来预测下一个词的能力。这就是<strong>数据泄露 (Data Leakage)</strong>。它会让模型在训练集上表现得很好（因为总能抄到答案），但在实际需要自己一个词一个词生成的测试阶段，表现会非常差。</p>
</li>
<li>
<p><strong>推理阶段 (Inference):</strong>
    在实际生成时，模型是不知道未来信息的。它生成了 "我"，然后将 "我" 作为输入，预测出 "是"；再将 "我 是" 作为输入，预测出 "一个"... 这个过程是严格遵守时间顺序的。</p>
</li>
</ol>
<p><mark>为了让训练阶段的行为模式和推理阶段保持一致，我们必须在训练时引入一个机制，强制模型在预测当前位置 <code>i</code> 的时候，只能关注到位置 <code>i</code> 以及它之前的所有位置 <code>0, 1, ..., i-1</code>，而不能看到任何未来的信息 <code>i+1, i+2, ...</code>。</mark></p>
<p>这个机制，就是 <strong>"Sequence Mask"</strong> 或者叫 <strong>"Causal Mask"</strong>。</p>
<p><strong>总结一下：</strong></p>
<ul>
<li><strong>目的</strong>：确保模型在预测当前词时，只依赖于已经生成的词（过去和现在的信息），而不会依赖于未来的词（作弊信息）。</li>
<li><strong>本质</strong>：强制 Self-Attention 变成一种<strong>单向</strong>的、有因果顺序的注意力机制，这与 Encoder 中可以自由查看所有上下文的<strong>双向</strong>注意力形成对比。</li>
</ul>
<p><mark>具体而言， Mask 是作用在计算出 Attention 分数 <strong>之后</strong>，但在进行 <code>Softmax</code> 操作 <strong>之前</strong>。</mark></p>
<p>我们回顾一下 Self-Attention 的核心计算公式：</p>
<pre class="arithmatex">\[
\text{Attention}(Q, K, V) = \text{softmax}\left(\frac{QK^T}{\sqrt{d_k}}\right)V
\]</pre>
<p>Masking 的关键步骤就发生在 <code>softmax</code> 函数的内部。具体来说：</p>
<ol>
<li>
<p><strong>计算 Attention Score:</strong> 首先，我们正常计算 Query 和 Key 的点积来得到注意力分数矩阵 <code>scores</code>。假设我们的序列长度为 <code>seq_len</code>，那么多头注意力中每个头的 <code>scores</code> 矩阵维度就是 <code>(seq_len, seq_len)</code>。</p>
<p><span class="arithmatex">\(S = QK^T\)</span></p>
</li>
<li>
<p><strong>创建 Mask 矩阵:</strong> 我们创建一个与 <code>scores</code> 矩阵同样大小的 Mask 矩阵。这个矩阵的上三角部分（不含对角线）是 <code>True</code> 或者 <code>1</code>，其余部分是 <code>False</code> 或者 <code>0</code>。这个矩阵直观地表示了哪些位置是“未来”，需要被遮住。
    例如，对于一个长度为4的序列，Mask 矩阵（布尔形式）看起来像这样：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>[[False, True,  True,  True],
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a> [False, False, True,  True],
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a> [False, False, False, True],
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a> [False, False, False, False]]
</code></pre></div>
<code>True</code> 代表需要被 Mask 掉的位置。</p>
</li>
<li>
<p><strong>应用 Mask:</strong> 接下来是最关键的一步。我们会把 <code>scores</code> 矩阵中，凡是 Mask 矩阵中为 <code>True</code> 的位置，都替换成一个<strong>非常小的负数</strong> (比如 <code>-1e9</code> 或者负无穷 <code>-inf</code>)。</p>
</li>
</ol>
<div class="admonition question">
<p class="admonition-title">为什么要用一个极小的负数，而不是直接设为0呢？</p>
<p>因为下一步就是 <code>Softmax</code>。<code>Softmax</code> 的计算是 <span class="arithmatex">\(e^x\)</span>。如果我们将一个位置的值设为负无穷，那么 <span class="arithmatex">\(e^{-\infty} \approx 0\)</span>。这样一来，经过 <code>Softmax</code> 归一化后，这些被 Mask 掉的位置的注意力权重就变成了<strong>零</strong>，相当于在计算后续的加权和时，完全忽略了这些位置的 <code>Value</code>。</p>
<p>如果只是设为0，那么 <span class="arithmatex">\(e^0 = 1\)</span>，它依然会在 <code>Softmax</code> 中占有一定的权重，这就无法达到“遮蔽”的效果了。</p>
</div>
<hr />
<h2 id="how-to-prevent-gradient-loss">How to prevent Gradient Loss? (🤔)<a class="headerlink" href="#how-to-prevent-gradient-loss" title="Permanent link">⚓︎</a></h2>
<p>这触及了深度学习模型能够“网络越堆越深”的根本原因。</p>
<p>以下三大法宝来克服梯度消失：</p>
<ol>
<li><strong>残差连接 (Residual Connections)</strong> -&gt; 来自 ResNet</li>
<li><strong>层归一化 (Layer Normalization)</strong> -&gt; 来自 Transformer</li>
<li><strong>ReLU (及其变体) 激活函数</strong></li>
</ol>
<p>下面我们逐一拆解。</p>
<dl>
<dt><mark>残差连接 (Residual Connections / Skip Connections)</mark></dt>
<dd>
<p>这是解决梯度消失问题的<strong>最核心</strong>的武器，是 BERT 乃至整个 Transformer 架构能够堆深的基石。</p>
<p><strong>问题是什么？</strong></p>
<p>在非常深的网络中，梯度需要从最后一层反向传播到第一层。在链式法则的作用下，梯度会经过一系列矩阵乘法。如果许多梯度值都小于1，那么连乘之后梯度会迅速缩小，趋近于0，这就是梯度消失。这导致底层的网络层几乎无法得到更新，学不到东西。</p>
<p><strong>残差连接如何解决？</strong></p>
<p>BERT的每一个子层（无论是多头注意力还是前馈网络）都采用了残差连接。其结构是：</p>
<pre class="arithmatex">\[ H(x) = F(x) + x \]</pre>
<ul>
<li><span class="arithmatex">\(x\)</span> 是子层的输入。</li>
<li><span class="arithmatex">\(F(x)\)</span> 是子层的映射函数（如 Self-Attention 或 FFN 的计算）。</li>
<li><span class="arithmatex">\(H(x)\)</span> 是子层的最终输出。</li>
</ul>
<p>这个简单的 <code>+ x</code> 操作，创造了一条“高速公路”。在反向传播时，损失函数对 <span class="arithmatex">\(x\)</span> 的梯度 <span class="arithmatex">\(\frac{\partial \text{Loss}}{\partial x}\)</span> 会变成：</p>
<pre class="arithmatex">\[
\frac{\partial \text{Loss}}{\partial x} = \frac{\partial \text{Loss}}{\partial H} \cdot \frac{\partial H}{\partial x} = \frac{\partial \text{Loss}}{\partial H} \cdot \left( \frac{\partial F(x)}{\partial x} + 1 \right)
\]</pre>
<p>因为那个 <code>+1</code> 的存在，梯度在反向传播时就有了一个<strong>直接向后传递的恒等路径</strong>。即使 <span class="arithmatex">\(\frac{\partial F(x)}{\partial x}\)</span> 很小趋近于0，梯度也能保证至少以接近1的比例回传。这极大地缓解了梯度消失问题，保证了即使在非常深的网络中，底层的网络层也能接收到有效的梯度信号。</p>
<p>Transformer Encoder 中，每个 <code>Add &amp; Norm</code> 中的 <code>Add</code> 就是在执行残差连接。</p>
</dd>
</dl>
<p><br></p>
<dl>
<dt><mark>层归一化 (Layer Normalization)</mark></dt>
<dd>
<p>如果说残差连接是“开源”，那么层归一化就是“节流”。它通过稳定数据分布，让梯度传播更顺畅。</p>
<p><strong>问题是什么？</strong>
在深层网络中，每一层的参数更新都会导致其输出数据的分布发生变化。对于下一层来说，它的输入分布一直在变来变去，这种现象叫做<strong>内部协变量偏移 (Internal Covariate Shift)</strong>。这使得模型训练变得不稳定，就像在流沙上盖楼一样。不稳定的数据分布也可能导致梯度变得过大（爆炸）或过小（消失）。</p>
<p><strong>LayerNorm 如何解决？</strong>
Layer Normalization 在<strong>每一层</strong>的输入端，对数据进行归一化处理。具体来说，它会计算单个样本在特征维度上的均值和方差，然后将该样本的激活值标准化为均值为0，方差为1的分布。</p>
<p>这个操作有两大好处：</p>
<ol>
<li><strong>稳定数据分布</strong>：无论前一层的参数如何变化，经过 LayerNorm 之后，输入到下一层的数据分布都会被“拉回”到一个相对固定的、稳定的状态。这使得训练过程更加稳定。</li>
<li><strong>维持梯度尺度</strong>：通过将数据缩放到一个固定的范围内，可以有效防止激活值过大或过小，从而避免了梯度因为激活值本身的大小问题而发生爆炸或消失。它让梯度在网络中传播时保持在一个“健康”的范围内。</li>
</ol>
<p>在 BERT 的 <code>Add &amp; Norm</code> 中的 <code>Norm</code> 就是在执行层归一化。它通常被放在残差连接之后，对 <code>F(x) + x</code> 的结果进行归一化，然后再送入下一层。</p>
</dd>
</dl>
<p><br></p>
<dl>
<dt><mark>ReLU 激活函数</mark></dt>
<dd>
<p>这是一个看似简单但非常有效的选择。</p>
<p><strong>问题是什么？</strong></p>
<p>像 <code>Sigmoid</code> 或 <code>tanh</code> 这样的激活函数，它们的导数在大部分区域都小于1，特别是在函数饱和区（输入值很大或很小时），导数几乎为0。在反向传播中，梯度会乘以这些小于1的导数，导致梯度快速衰减。</p>
<p><strong>ReLU 如何解决？</strong></p>
<p>BERT 的前馈网络（Feed-Forward Network, FFN）部分通常使用 ReLU 的变体，如 <strong>GELU (Gaussian Error Linear Unit)</strong>。但我们可以先用简单的 ReLU 来理解其优势。</p>
<p>ReLU 函数 <span class="arithmatex">\(f(x) = \max(0, x)\)</span> 的特点是：
*   当输入 <span class="arithmatex">\(x &gt; 0\)</span> 时，其导数为 <strong>恒等于 1</strong>。
*   当输入 <span class="arithmatex">\(x \le 0\)</span> 时，其导数为 0。</p>
<p>这个“导数为1”的特性意味着，对于被激活的神经元，梯度在反向传播经过它时<strong>不会有任何衰减</strong>，可以原封不动地向后传递。这在很大程度上缓解了梯度消失问题。GELU 具有和 ReLU 类似的优点，同时在负值区有更平滑的导数，实践中效果更好。</p>
</dd>
</dl>
<p>比如在 Bert 中：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">解决策略</th>
<th style="text-align: left;">具体技术</th>
<th style="text-align: left;">在BERT中的位置</th>
<th style="text-align: left;">作用机理</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>创建梯度高速路</strong></td>
<td style="text-align: left;"><strong>残差连接 (Residual Connection)</strong></td>
<td style="text-align: left;">每个子层的 <code>Add &amp; Norm</code> 块</td>
<td style="text-align: left;">保证梯度至少有条恒等路径可以回传，避免因连乘而消失。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>稳定梯度环境</strong></td>
<td style="text-align: left;"><strong>层归一化 (Layer Normalization)</strong></td>
<td style="text-align: left;">每个子层的 <code>Add &amp; Norm</code> 块</td>
<td style="text-align: left;">稳定每层输入的数据分布，让梯度尺度保持在“健康”范围。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>避免梯度衰减</strong></td>
<td style="text-align: left;"><strong>ReLU / GELU 激活函数</strong></td>
<td style="text-align: left;">前馈网络 (FFN)</td>
<td style="text-align: left;">在激活区，其导数恒为1（或接近1），不会让梯度在传播中衰减。</td>
</tr>
</tbody>
</table>
<p>正是这套从 ResNet 和 Transformer 继承而来的成熟设计，使得 BERT 可以放心地将模型做得非常深，从而获得强大的语言表示能力。</p>
<h2 id="adam-optmz-features">Adam Optmz: Features (🤔)<a class="headerlink" href="#adam-optmz-features" title="Permanent link">⚓︎</a></h2>
<div class="admonition question">
<p><strong>一句话概括：</strong></p>
<p>Adam 优化器可以被看作是一个<strong>更智能、更高效的“梯度下降”方法</strong>。它的主要作用是<strong>指导模型在训练过程中如何有效地更新参数（权重），从而更快、更稳定地找到损失函数的最小值。</strong></p>
<p><strong>一个经典的类比：</strong></p>
<p>想象一下，你站在一座连绵不绝的山脉上，眼睛被蒙住，你的任务是尽快走到山脉的最低点（也就是损失函数的最小值点）。</p>
<ul>
<li><strong>普通梯度下降 (SGD)</strong>：你每走一步，都会伸脚试探一下当前位置最陡峭的方向，然后朝那个方向迈出一小步。但如果这个山谷是一个狭长而弯曲的峡谷，你可能会在峡谷两侧来回震荡，走得很慢。</li>
<li><strong>Adam 优化器</strong>：你就像一个拥有<strong>“惯性”</strong>和<strong>“环境感知能力”</strong>的智能小球。<ul>
<li><strong>惯性</strong>：你不会每一步都完全改变方向，而是会保留一部分上一步的速度，让你能冲过平坦的区域，并抑制在峡谷两侧的震荡。</li>
<li><strong>环境感知</strong>：你会根据脚下路面的“崎岖程度”来动态调整步伐。在平坦的大路上（梯度小的参数），你会迈出更大的步子；在崎岖不平的陡坡上（梯度大的参数），你会小心翼翼地迈出小步子，防止冲过头。</li>
</ul>
</li>
</ul>
<hr />
<p>Adam 这个名字来源于 <strong>Adaptive Moment Estimation（自适应矩估计）</strong>，它巧妙地结合了两种强大的优化技术：</p>
<ul>
<li>
<ol>
<li>动量 (Momentum) - 决定“方向”的惯性</li>
</ol>
</li>
<li>
<p><strong>作用</strong>: 解决普通梯度下降在某些地形（如狭长山谷）中收敛慢、易震荡的问题。</p>
</li>
<li><strong>原理</strong>: 它引入了“一阶矩估计”，可以理解为梯度的<strong>指数移动平均值</strong>。简单来说，它不仅考虑当前这一步的梯度方向，还参考了之前几步的平均方向。</li>
<li>
<ul>
<li>当梯度方向一致时，这个“动量”会累积，使得更新步伐加速。</li>
<li>当梯度方向来回摆动时，这个“动量”会相互抵消，起到抑制震荡的作用。</li>
</ul>
</li>
<li>
<ol>
<li>自适应学习率 (RMSprop) - 决定“步长”的感知能力</li>
</ol>
</li>
<li>
<p><strong>作用</strong>: 解决所有参数都共享同一个学习率（步长）的低效问题。</p>
</li>
<li><strong>原理</strong>: 它引入了“二阶矩估计”，可以理解为<strong>梯度平方</strong>的指数移动平均值。这个值可以衡量一个参数梯度的“历史波动性”或“大小”。</li>
<li>
<ul>
<li>对于历史上梯度一直较小的参数（路面平坦），Adam 会用一个较小的分母来除，使得有效学习率变大，从而迈出更大的步子。</li>
<li>对于历史上梯度一直较大的参数（路面陡峭），Adam 会用一个较大的分母来除，使得有效学习率变小，从而迈出更小的步子，防止“冲出”最优解。</li>
</ul>
</li>
</ul>
<p><strong>总结起来，在每一步更新时：</strong>
<strong>Adam = 用“动量”算出一个大致的前进方向 + 用“自适应学习率”机制决定每个参数在该方向上该走多远。</strong></p>
<p>补充一点，Adam 还包含一个<strong>偏差修正（Bias Correction）</strong>步骤，用于修正在训练初期，移动平均值会偏向于零的问题，确保初始阶段的步长不会过小。</p>
<ul>
<li>
<p>为什么它成为了默认首选？</p>
</li>
<li>
<p><strong>收敛速度快</strong>：结合了动量和自适应学习率的优点，在大多数情况下比其他优化器收敛得更快。</p>
</li>
<li><strong>实现简单，效果稳健</strong>：在各种模型和数据集上都表现良好，是“开箱即用”的可靠选择。</li>
<li><strong>对超参数不那么敏感</strong>：它的几个关键超参数（如 <code>beta1</code>, <code>beta2</code>, <code>epsilon</code>）通常使用默认值就能取得不错的效果，减少了调参的负担。</li>
</ul>
<hr />
<h3 id="_1">面试精炼版回答<a class="headerlink" href="#_1" title="Permanent link">⚓︎</a></h3>
<ol>
<li>
<p><strong>它的作用</strong>：Adam是一种高效的梯度下降优化算法，用来在模型训练时指导参数更新，目标是更快、更稳定地找到损失函数的最小值。</p>
</li>
<li>
<p><strong>核心思想</strong>：它结合了两种经典优化思想。<strong>一是“动量（Momentum）”</strong>，通过计算梯度的指数移动平均（一阶矩），为参数更新引入“惯性”，以加速收敛并抑制震荡。<strong>二是“自适应学习率（Adaptive Learning Rate）”</strong>，通过计算梯度平方的指数移动平均（二阶矩），为模型中的每一个参数动态地、独立地计算学习率，使得在梯度平缓的参数上步长大，在梯度陡峭的参数上步长小。</p>
</li>
<li>
<p><strong>为什么流行</strong>：Adam综合了上述优点，收敛速度快，在各种任务中表现稳健，而且超参数相对不敏感，使其成为了绝大多数深度学习任务的默认首选优化器。</p>
</li>
</ol>
</div>
<h2 id="how-to-prevent-overfitting">How to prevent Overfitting?<a class="headerlink" href="#how-to-prevent-overfitting" title="Permanent link">⚓︎</a></h2>
<p><strong>过拟合 (Overfitting)</strong> 的本质是模型学到了训练数据中的“噪声”和“偶然规律”，而没有学到普适的、可泛化的“通用规律”。其表现为：模型在训练集上表现极好，但在从未见过的验证集或测试集上表现很差。</p>
<p>对于动辄拥有数十亿甚至上万亿参数的大模型来说，其“记忆”能力极强，因此防止过拟合尤为关键。下面是从不同维度梳理的常用方法：</p>
<dl>
<dt>数据增强 (Data Augmentation)</dt>
<dd><strong>核心思想</strong>: 当数据量有限时，通过各种技术创造出新的、合理的训练数据。
*   <strong>应用</strong>:
    *   <strong>传统方法</strong>: 例如<strong>回译 (Back-translation)</strong>（如 <code>中文 -&gt; 英文 -&gt; 新的中文</code>），或在句子中进行同义词替换。
    *   <strong>现代方法</strong>: 使用另一个强大的 LLM 来生成高质量的训练数据，比如对一条指令进行<strong>多样化的改写</strong>，或者生成更多样的回答。</dd>
<dt>数据清洗 (Data Cleaning)</dt>
<dd><strong>核心思想</strong>: 确保训练数据的质量。如果数据本身包含大量错误标签或噪声，模型会努力去“拟合”这些错误，这本身就是一种过拟合。
<strong>应用</strong>: 去除或修正训练集中标注错误的样本、格式混乱的数据等。</dd>
<dt>参数高效微调 (PEFT, e.g., LoRA)</dt>
<dd><strong>核心思想</strong>: 这是大模型时代最重要的正则化手段之一。通过冻结绝大部分预训练参数，只训练一小部分新增的、低秩的“适配器”参数 (如 LoRA 中的 A, B 矩阵)，极大地<strong>限制了模型可以改变的自由度</strong>。
*   <strong>应用</strong>: 在 SFT 或特定领域微调时，使用 LoRA 技术。模型无法轻易撼动其庞大的预训练知识库去死记硬背新的小数据集，只能在原有能力的基础上进行微调，天然地防止了灾难性遗忘和过拟合。</dd>
<dt>Dropout</dt>
<dd>
<p><strong>核心思想</strong>: 在训练过程中的每一次前向传播时，随机地将一部分神经元的输出设置为零。</p>
<p><strong>应用</strong>: BERT 和其他 Transformer 模型中的全连接层和注意力层后都应用了 Dropout。这强迫网络不能过度依赖任何单一的神经元，必须学习更加鲁棒和分散的特征表示，就像一个团队里随机让几个人“轮休”，强迫其他人学会合作和备份。</p>
</dd>
<dt>权重衰减 (Weight Decay / L2 Regularization)</dt>
<dd><strong>核心思想</strong>: 在损失函数中增加一个惩罚项，该项与模型权重的平方和成正比 (<span class="arithmatex">\(L = L_{\text{original}} + \lambda \sum w^2\)</span>)。这会“惩罚”过大的权重。
*   <strong>应用</strong>: 这是几乎所有深度学习训练中的标配。它鼓励模型学习到更小、更分散的权重，使得模型的输出对输入中微小的、噪声性的变动不那么敏感，从而提高了泛化能力。</dd>
<dt>早停 (Early Stopping)</dt>
<dd><strong>核心思想</strong>: 在训练过程中，除了计算在训练集上的损失，同时还要在一个独立的<strong>验证集 (Validation Set)</strong> 上监控模型的性能（如准确率、困惑度）。当模型在训练集上的损失仍在下降，但在验证集上的性能开始变差时，就立即停止训练。
*   <strong>应用</strong>: 非常实用且广泛应用的策略。它直接抓住了过拟合的定义（验证性能下降），在模型“走火入魔”之前及时叫停。</dd>
<dt>标签平滑 (Label Smoothing)</dt>
<dd><strong>核心思想</strong>: 在分类任务中，将硬性的 one-hot 标签（如 <code>[0, 0, 1]</code>）软化成一个平滑的分布（如 <code>[0.05, 0.05, 0.9]</code>）。
*   <strong>应用</strong>: 这相当于告诉模型：“不要对你的判断过于自信，这个样本虽然是C类，但它也可能有A类和B类的一点点特征”。这可以防止模型为了在某个样本上达到100%的置信度而产生非常大的 logits，使得模型决策边界更平滑，泛化性更好。</dd>
</dl>
<h3 id="tiny-conclusion">Tiny Conclusion<a class="headerlink" href="#tiny-conclusion" title="Permanent link">⚓︎</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">方法类别</th>
<th style="text-align: left;">具体方法</th>
<th style="text-align: left;">核心思想</th>
<th style="text-align: left;">典型应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>数据层面</strong></td>
<td style="text-align: left;">增加数据量</td>
<td style="text-align: left;">让模型见多识广，难以死记硬背</td>
<td style="text-align: left;">所有阶段，尤其是资源允许的预训练</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">数据增强</td>
<td style="text-align: left;">从现有数据中创造新的合理数据</td>
<td style="text-align: left;">微调数据量不足时</td>
</tr>
<tr>
<td style="text-align: left;"><strong>模型层面</strong></td>
<td style="text-align: left;"><strong>LoRA (PEFT)</strong></td>
<td style="text-align: left;"><strong>限制模型可训练参数量，约束其能力</strong></td>
<td style="text-align: left;"><strong>大模型微调阶段最主流的正则化手段</strong></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">Dropout</td>
<td style="text-align: left;">随机让神经元“失活”，强迫网络学习鲁棒特征</td>
<td style="text-align: left;">Transformer 中的 FFN 和 Attention 层</td>
</tr>
<tr>
<td style="text-align: left;"><strong>训练层面</strong></td>
<td style="text-align: left;"><strong>权重衰减 (L2)</strong></td>
<td style="text-align: left;">惩罚过大的模型权重，使模型更平滑</td>
<td style="text-align: left;">几乎所有模型的优化器设置中</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><strong>早停 (Early Stopping)</strong></td>
<td style="text-align: left;"><strong>在验证集性能下降时停止训练</strong></td>
<td style="text-align: left;">几乎所有监督学习的训练流程中</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">标签平滑</td>
<td style="text-align: left;">软化标签，防止模型对预测过于自信</td>
<td style="text-align: left;">分类任务的损失函数设计中</td>
</tr>
</tbody>
</table>
<div class="admonition question">
<p class="admonition-title">什么是 KV-cache？</p>
<p>它是什么：KV Cache 是一种针对 Transformer 模型在<strong>自回归推理（如文本生成）时的关键优化技术</strong>。</p>
<p>目的：解决在生成每一个新 token 时，对历史序列进行大量重复计算的问题，从而大幅提升推理速度。</p>
<p><strong>工作原理</strong>：它通过缓存（存储）已经计算过的所有 token 的“键（Key）”和“值（Value）”向量。在生成下一个 token 时，模型只需要为当前这一个新 token 计算 Q, K, V，然后从缓存中读取历史 K, V，拼接后进行注意力计算。</p>
<blockquote>
<p>这就是自注意力机制（Self-Attention）的核心。在自回归生成第 <span class="arithmatex">\(t\)</span> 个 token 时，这个新 token 的 Query 向量（<span class="arithmatex">\(Q_t\)</span>）必须与从第 1 个到第 <span class="arithmatex">\(t\)</span> 个所有 token 的 Key 向量（<span class="arithmatex">\(K_1, K_2, ..., K_t\)</span>）进行点积，来计算注意力权重。这就是“看到前面的所有上下文”的数学体现。</p>
</blockquote>
<p><strong>效果与权衡</strong>：</p>
<p>巨大收益：将生成长序列的计算复杂度从近似三次⽅降为二次方，极大地加快了生成速度，使大模型能够进行流畅的对话和长文生成。
主要代价：占用大量的显存来存储这些 K, V 向量。因此，在实际应用中，模型的最大上下文长度往往受限于 KV Cache 所占用的显存大小。</p>
<p>GQA, MQA 分组多头注意力机制。</p>
</div>
<div class="admonition question">
<p class="admonition-title">生成式大模型 的推理</p>
<p>这是一个非常好的问题，它触及了不同 Transformer 架构在推理时的核心差异。你的问题直接关联到模型的两大类别：Encoder-Only 和 Encoder-Decoder。</p>
<p>答案是：<strong>这取决于你谈论的是哪种类型的 Transformer 模型。</strong></p>
<p>我们来分别讨论这两种主流架构：</p>
<ul>
<li>
<ol>
<li>Decoder-Only 架构（例如：GPT系列、Llama系列、BLOOM）</li>
</ol>
</li>
</ul>
<p>这是目前大语言模型（LLM）最主流的架构，我们刚才讨论的自回归生成、KV Cache 等都主要发生在这种模型上。</p>
<ul>
<li><strong>推理时用到哪些部分？</strong><ul>
<li><strong>只用到 Decoder 部分。</strong> 顾名思义，这种模型根本没有 Encoder。</li>
</ul>
</li>
<li><strong>会用到交叉注意力吗？</strong><ul>
<li><strong>不会。</strong> 因为交叉注意力（Cross-Attention）的定义是：一个部分的 Query（通常来自 Decoder）关注另一个部分的 Key 和 Value（通常来自 Encoder）。既然没有 Encoder，自然也就不存在交叉注意力。</li>
<li>在这种架构里，Decoder 模块中的“交叉注意力”层被一个标准的“自注意力”（Self-Attention）层所替代。所以，一个典型的 Decoder-Only 模型的 Decoder Block 包含两个核心部分：<ol>
<li><strong>带掩码的自注意力 (Masked Self-Attention)</strong>: 用于处理和生成文本。</li>
<li><strong>前馈网络 (Feed-Forward Network)</strong>: 用于信息加工。</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><strong>小结：对于 GPT 这类 Decoder-Only 模型，推理过程就是我们前面详细描述的自回归生成，它只涉及 Decoder 自身，并且只使用自注意力机制。</strong></p>
<ul>
<li>
<ol>
<li>Encoder-Decoder 架构（例如：原始 Transformer、T5、BART）</li>
</ol>
</li>
</ul>
<p>这类模型常用于需要“转换”的任务，比如机器翻译（一种语言 -&gt; 另一种语言）、文本摘要（长文章 -&gt; 短摘要）。</p>
<ul>
<li><strong>推理时用到哪些部分？</strong><ul>
<li><strong>Encoder 和 Decoder 都会用到。</strong></li>
</ul>
</li>
<li><strong>会用到交叉注意力吗？</strong><ul>
<li><strong>会，而且这是关键步骤！</strong></li>
</ul>
</li>
</ul>
<p>它的推理过程比 Decoder-Only 模型要复杂一些，分为两个主要阶段：</p>
<p><strong>阶段一：编码输入序列 (Encoder Pass)</strong></p>
<ol>
<li><strong>输入</strong>: 将源序列（Source Sequence），比如要翻译的德语句子 "Ich bin ein Berliner"，完整地输入到 <strong>Encoder</strong> 中。</li>
<li><strong>计算</strong>: Encoder 并行地处理整个德语序列，通过多层的自注意力机制，最终为输入序列的每个 token 生成一个富含上下文信息的表示（representation）。我们称这组最终输出的向量为 <code>memory</code> 或 <code>encoder_hidden_states</code>。</li>
<li><strong>产出</strong>: 这一整套 <code>memory</code> 向量。<strong>请注意：这个 <code>memory</code> 在整个后续的解码过程中是固定不变的，可以被看作是一个只读的知识库。</strong></li>
</ol>
<p><strong>阶段二：自回归解码 (Decoder Pass)</strong></p>
<p>现在，Decoder 开始一个词一个词地生成目标序列（比如英语句子）。这个过程和 GPT 的自回归很像，但多了一个关键步骤：</p>
<ol>
<li><strong>起始</strong>: Decoder 从一个特殊的起始符 <code>[BOS]</code> (Begin of Sentence) 开始。</li>
<li><strong>循环生成</strong>:<ul>
<li><strong>a. 带掩码的自注意力</strong>: Decoder 首先对自己已经生成的部分进行自注意力计算。比如生成到第三个词时，它会回顾 <code>[BOS]</code> 和前两个已生成的词。这一步和 GPT 完全一样。</li>
<li><strong>b. 交叉注意力 (Cross-Attention)</strong>: <strong>这是核心区别！</strong> 在上一步自注意力的输出之上，Decoder 会执行一个交叉注意力操作。<ul>
<li><strong>Query</strong>: 来自 Decoder 刚刚经过自注意力处理后的向量。</li>
<li><strong>Key 和 Value</strong>: 来自<strong>阶段一 Encoder 输出的那套固定的 <code>memory</code> 向量</strong>。</li>
<li><strong>作用</strong>: 这一步是让 Decoder 在决定下一个要生成的词时，去“查阅”和“关注”整个德语输入句子的信息。比如，当它要生成 "I" 时，交叉注意力可能会让它高度关注德语输入中的 "Ich"。</li>
</ul>
</li>
<li><strong>c. 前馈网络</strong>: 经过交叉注意力的结果会被送入前馈网络进行加工。</li>
<li><strong>d. 预测与采样</strong>: 最终预测出下一个词的概率分布，并采样得到新词（比如 "am"）。</li>
<li><strong>e. 迭代</strong>: 将新生成的 "am" 加入到 Decoder 的已知序列中，开始下一轮循环，去生成 "a"。</li>
</ul>
</li>
</ol>
<p><strong>总结一下 Encoder-Decoder 模型的推理：</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">模块</th>
<th style="text-align: left;">作用</th>
<th style="text-align: left;">何时运行</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Encoder</strong></td>
<td style="text-align: left;">将整个源序列编码成一组固定的 <code>memory</code> 向量。</td>
<td style="text-align: left;"><strong>只在最开始运行一次。</strong></td>
</tr>
<tr>
<td style="text-align: left;"><strong>Decoder</strong></td>
<td style="text-align: left;">在一个自回归循环中生成目标序列。</td>
<td style="text-align: left;">在每个 token 生成时都运行。</td>
</tr>
<tr>
<td style="text-align: left;">↳ <strong>自注意力</strong></td>
<td style="text-align: left;">让 Decoder 回顾自己已经生成的内容。</td>
<td style="text-align: left;">在每个生成步骤中运行。</td>
</tr>
<tr>
<td style="text-align: left;">↳ <strong>交叉注意力</strong></td>
<td style="text-align: left;">让 Decoder 查阅和参考 Encoder 的 <code>memory</code>。</td>
<td style="text-align: left;">在每个生成步骤中运行。</td>
</tr>
<tr>
<td style="text-align: left;">↳ <strong>前馈网络</strong></td>
<td style="text-align: left;">信息处理。</td>
<td style="text-align: left;">在每个生成步骤中运行。</td>
</tr>
</tbody>
</table>
<p><strong>面试回答精炼版：</strong></p>
<p>面试官您好，关于推理阶段是否用到 Encoder、Decoder 和交叉注意力，这取决于模型的具体架构：</p>
<ol>
<li>
<p><strong>对于 GPT、Llama 这类 Decoder-Only 模型</strong>：它们没有 Encoder，因此推理时只使用 Decoder 部分。生成过程是纯粹的自回归，只涉及到“自注意力”，完全<strong>不会</strong>用到交叉注意力。</p>
</li>
<li>
<p><strong>对于原始 Transformer、T5、BART 这类 Encoder-Decoder 模型</strong>，通常用于翻译或摘要任务：</p>
<ul>
<li><strong>Encoder 和 Decoder 都会用到。</strong> Encoder 在推理开始时运行一次，将输入句子编码成一个固定的 <code>memory</code>。</li>
<li>Decoder 在一个自回归循环中逐词生成输出。在每一步，它都会用到<strong>交叉注意力</strong>机制，其 Query 来自 Decoder 自身，而 Key 和 Value 则始终来自于 Encoder 产生的那个固定 <code>memory</code>。这允许 Decoder 在生成每个词时都能参考完整的输入信息。</li>
</ul>
</li>
</ol>
</div>
<h2 id="other-qs-during-interview">Other Qs during interview<a class="headerlink" href="#other-qs-during-interview" title="Permanent link">⚓︎</a></h2>
<h3 id="why-decoder-only-not-encoder-decoder">Why Decoder-only, not Encoder-Decoder?<a class="headerlink" href="#why-decoder-only-not-encoder-decoder" title="Permanent link">⚓︎</a></h3>
<div class="admonition note">
<p class="admonition-title">为什么现在大多是 decoder-only 结构？</p>
<ul>
<li>
<p>问题：为什么现在的大模型大多是 Decoder-Only 结构，而非经典的 Encoder-Decoder 结构？这种结构的优势是什么？原先结构又有哪些劣势？</p>
</li>
<li>
<p>根本原因：任务范式的统一</p>
</li>
<li>
<p><strong>传统 Encoder-Decoder 范式</strong>：它的设计天生就是为了<strong>“序列到序列”（Seq2Seq）</strong>任务，比如翻译（德语 -&gt; 英语）、摘要（长文 -&gt; 短文）。它有一个明确的、分离的“源输入”（Source）和“目标输出”（Target）。这种结构在处理这类“转换”任务时非常强大和直观。</p>
</li>
<li><strong>现代 LLM (Decoder-Only) 范式</strong>：现代大模型的目标是成为一个<strong>通用的语言接口</strong>，能够处理包括但不限于问答、对话、写作、代码生成、思维链推理等无数种任务。这些任务很多都不是严格的 Seq2Seq 格式。</li>
</ul>
<p>Decoder-Only 架构通过一个极其简单而强大的范式统一了所有任务：<strong>文本补全（Text Completion）</strong> 或者说 <strong>下一个词预测（Next Token Prediction）</strong>。</p>
<ul>
<li><strong>问答</strong>: <code>Q: 什么是引力波？ A:</code> -&gt; 模型补全答案。</li>
<li><strong>翻译</strong>: <code>Translate German to English: Ich bin ein Berliner =&gt;</code> -&gt; 模型补全 "I am a Berliner."</li>
<li><strong>写代码</strong>: <code>// Python function to calculate fibonacci\ndef fib(n):</code> -&gt; 模型补全代码实现。</li>
<li><strong>对话</strong>: <code>User: 今天天气怎么样？\nAssistant:</code> -&gt; 模型补全回答。</li>
</ul>
<p>你看，所有不同的任务都被巧妙地转换成了一个“根据前文预测后文”的统一形式。Decoder-Only 结构正是为这个单一目标而生的，它天生就擅长做“续写”。</p>
<ul>
<li>
<ol>
<li>Decoder-Only 结构的优势</li>
</ol>
</li>
</ul>
<p>基于上述的范式统一，Decoder-Only 架构展现出几大优势：</p>
<ol>
<li>
<p><strong>架构简单与高效扩展（Simplicity &amp; Scalability）</strong>:</p>
<ul>
<li>它只有一个模块（Decoder），结构更统一，实现和维护起来更简单。</li>
<li>在训练时，所有参数都为一个统一的“预测下一个词”的目标服务，训练过程更稳定、更直接。</li>
<li>这种简单性使得它非常容易进行规模化扩展。当我们把模型从几十亿扩展到几千亿甚至万亿参数时，一个简单、统一的架构是至关重要的。这正是“大力出奇迹”（涌现能力）的基础。</li>
</ul>
</li>
<li>
<p><strong>为“上下文学习”（In-Context Learning）而生</strong>:</p>
<ul>
<li>这是最核心的优势。Decoder-Only 模型在预测每一个新词时，都会回顾并关注从开头到当前位置的所有上文。这意味着整个提示（Prompt）和已经生成的内容构成了一个动态的、不断增长的上下文。</li>
<li>模型学会了从这个上下文中“即时学习”和“领会意图”。你给它几个例子（Few-shot prompting），它就能模仿这个模式；你给它一条指令，它就能理解并执行。这种能力是现代 LLM 如此强大的关键，而 Decoder-Only 的结构天然地支持了这一点。</li>
</ul>
</li>
<li>
<p><strong>极佳的生成流畅性</strong>:</p>
<ul>
<li>因为它的训练目标和生成方式完全一致（都是自回归地预测下一个词），所以它在生成长篇、连贯、流畅的文本方面表现得非常自然。</li>
</ul>
</li>
<li>
<ol>
<li>Encoder-Decoder 结构的劣势（在通用 LLM 场景下）</li>
</ol>
</li>
</ol>
<p>反过来看，在追求通用模型的背景下，Encoder-Decoder 结构的劣势就显现出来了：</p>
<ol>
<li>
<p><strong>信息瓶颈（Information Bottleneck）与僵化</strong>:</p>
<ul>
<li>Encoder 将所有源输入信息压缩成一组固定的 <code>memory</code> 向量。尽管 Decoder 可以通过交叉注意力反复查询这个 <code>memory</code>，但这个 <code>memory</code> 本身是<strong>一次性生成、静态不变的</strong>。</li>
<li>相比之下，Decoder-Only 模型在生成每个新词时，它的“上下文”是动态增长的，包含了之前生成的所有内容。这使得它的“世界观”是不断更新的，更加灵活。</li>
</ul>
</li>
<li>
<p><strong>架构复杂与训练低效</strong>:</p>
<ul>
<li>需要维护和训练两个不同的模块（Encoder 和 Decoder），参数分配和训练动态都更复杂。</li>
<li>交叉注意力的引入也增加了计算的复杂性。对于一个统一的、超大规模的模型来说，这种复杂性会成为扩展的阻碍。</li>
</ul>
</li>
<li>
<p><strong>不适用于开放式生成与对话</strong>:</p>
<ul>
<li>对于没有明确“源输入”的开放式生成任务（比如“写一首关于春天的诗”）或多轮对话，Encoder-Decoder 显得很“笨拙”。我们必须人为地将历史对话或任务指令塞进 Encoder，这远不如 Decoder-Only 模型直接续写来得自然和高效。</li>
</ul>
</li>
</ol>
<hr />
<p><strong>简单来说，Encoder-Decoder 模型像是一个专业的“翻译机”或“摘要机”。你给它一个输入，它给你一个精心转换的输出。它非常擅长做特定的“转换”任务。</strong></p>
<p><strong>而 Decoder-Only 大模型则更像一个拥有海量知识、并且精通“阅读理解和模仿续写”的“通才大脑”。你给它任何形式的文本作为开头发动它，它都能理解你的意图，并接着你的话往下说。</strong></p>
<p>随着算力的爆炸式增长，人们发现，把这个“通才大脑”做得足够大，它在完成特定任务时，其效果可以媲美甚至超越那些“专才”模型，同时还具备了前所未有的通用性和灵活性。因此，Decoder-Only 架构成为了通往通用人工智能（AGI）道路上，目前被验证为更优越和更有潜力的选择。</p>
</div>
<h3 id="moe-mixture-of-experts">MoE (Mixture of Experts)<a class="headerlink" href="#moe-mixture-of-experts" title="Permanent link">⚓︎</a></h3>
<div class="admonition note">
<p class="admonition-title">MMoE</p>
<p>当然，混合专家架构（Mixture of Experts, MoE）是当前大模型领域最前沿、最重要的技术之一，尤其在像 Mixtral-8x7B 和 GPT-4（据推测）这样的顶级模型中得到了应用。理解它对于算法岗面试至关重要。</p>
<p><strong>MoE 的核心思路是“用一组专家网络替换模型中的部分全连接网络（FFN），并让一个路由网络（Router）来决定每个输入（Token）应该由哪个或哪些专家来处理”。</strong></p>
<p>这是一种典型的<strong>“分治”</strong>思想。你可以把它想象成一个大型医院的会诊系统：</p>
<ul>
<li><strong>传统模型 (Dense Model)</strong>：就像一个“全科医生”。无论你是什么病（感冒、骨折、心脏病），你都只能找这一个医生。他什么都懂一点，但对复杂病症可能不够精通。计算开销很大，因为他每次都要调动全部的知识储备来给你看病。</li>
<li><strong>MoE 模型</strong>: 就像一个拥有“分诊台”和“多个专科医生”的医院。<ul>
<li><strong>专科医生 (Experts)</strong>：每个医生都是一个独立的前馈网络（FFN），他们分别擅长处理不同类型的信息（比如一个擅长语法，一个擅长事实知识，一个擅长代码逻辑）。</li>
<li><strong>分诊台 (Gating Network / Router)</strong>：这是一个小型的神经网络。你（一个 Token）来到医院后，分诊台护士会看你的情况（Token 的内容），然后决定把你<strong>动态地</strong>分配给最相关的一两个专科医生。</li>
<li><strong>会诊</strong>: 你被送到选定的几个专科医生那里，他们分别给出诊断意见。最后，分诊台会根据之前对你病情的判断，将这几个专家的意见加权汇总，形成最终的诊断报告（Token 的最终输出）。</li>
</ul>
</li>
</ul>
<p><strong>在训练和推理两侧都会发挥作用，但侧重点和效果不同。</strong></p>
<ol>
<li>
<p><strong>训练阶段</strong>:</p>
<ul>
<li><strong>作用</strong>: MoE 的主要作用是<strong>在保持计算成本（FLOPs）基本不变的情况下，极大地扩展模型的总参数量</strong>。</li>
<li><strong>解释</strong>: 假设一个 dense 模型的 FFN 层有 10B 参数。现在我们用一个 MoE 层替换它，这个 MoE 层包含8个专家，每个专家还是 10B 参数，总参数量就变成了 80B。但在训练时，对于每个 token，路由器只会激活其中的2个专家（Top-2路由）。这意味着这个 token 的计算量只相当于通过了 20B 参数的 FFN，而不是 80B。</li>
<li><strong>结果</strong>: 我们可以用几乎相同的训练时间和硬件成本，训练出一个总参数量大得多的模型。</li>
<li><mark>在训练时，对于每一个 token，模型并不是激活一个大 FFN 里的“部分神经元”，而是从多个独立的 FFN（专家）中，完整地激活一两个来进行计算。不同的 token 可能会被路由到不同的专家组合，这就是所谓的“动态稀疏性”</mark>。</li>
</ul>
</li>
<li>
<p><strong>推理阶段</strong>:</p>
<ul>
<li><strong>作用</strong>: MoE 的主要作用是<strong>显著提升推理速度</strong>。</li>
<li><strong>解释</strong>: 和训练时一样，在推理时，每个 token 也只会被发送到少数几个被激活的专家那里进行计算。模型虽然总参数量巨大（例如 Mixtral-8x7B 有约47B总参数），但每个 token 推理时实际动用的“活跃参数”只有约13B。</li>
<li><strong>结果</strong>: 推理速度与一个小的、同等活跃参数量的“稠密模型”相当，但性能却受益于其巨大的总参数量。</li>
</ul>
</li>
<li>
<p>有什么效果？解决了什么业界问题呢？</p>
</li>
</ol>
<p>MoE 主要解决了大模型发展中遇到的一个核心矛盾：<strong>性能与成本的“不可能三角”</strong>。</p>
<p><strong>业界问题（Scaling Law 的诅咒）</strong>:
根据大模型的缩放定律（Scaling Laws），模型的性能（如理解、推理能力）与模型的参数量和训练数据量正相关。简单来说，“越大越好”。但是，无限制地增大<strong>稠密模型（Dense Model）</strong>的规模会遇到瓶颈：
3.  <strong>训练成本过高</strong>: 训练一个万亿参数的稠密模型需要海量的计算资源和时间，成本高到难以承受。
4.  <strong>推理成本过高</strong>: 即使训练出来了，让一个万亿参数的稠密模型进行推理，速度会非常慢，延迟极高，无法实际部署应用。</p>
<p><strong>MoE 的解决方案和效果</strong>:
MoE 通过<strong>“稀疏激活”（Sparse Activation）</strong>的方式，优雅地绕开了这个难题。</p>
<ol>
<li>
<p><strong>效果一：突破性能瓶颈</strong>
    它允许模型在<strong>可控的计算预算</strong>内，将总参数量提升一个甚至多个数量级。更大的参数量意味着更大的模型容量，可以存储更丰富的知识，从而获得更强的“涌现能力”和性能。</p>
</li>
<li>
<p><strong>效果二：实现高效推理</strong>
    它让拥有巨大参数量的模型能够以远小于其总规模的计算量进行服务。这就是为什么 Mixtral-8x7B（47B总参数）的推理速度和 Llama 2 13B 差不多，但效果却能媲美 Llama 2 70B。<strong>它用更小的推理成本，实现了更强的模型性能。</strong></p>
</li>
</ol>
<hr />
<p>我对混合专家（MoE）架构的理解如下：</p>
<ol>
<li>
<p><strong>核心思想</strong>：MoE 是一种“分治”策略，它用多个专精于不同领域的“专家网络”（独立的FFN）和一个“路由网络”来替换传统模型中的部分全连接层。当一个 token 输入时，路由网络会动态地选择激活少数几个最相关的专家来处理它。</p>
</li>
<li>
<p><strong>解决的问题</strong>：它主要解决了大模型 Scaling Law 下的“性能-成本”矛盾。传统稠密模型越大性能越好，但训练和推理成本会急剧上升，难以承受。</p>
</li>
<li>
<p><strong>带来的效果</strong>：</p>
<ul>
<li><strong>训练时</strong>：它可以在<strong>计算成本（FLOPs）基本不变</strong>的情况下，将模型的总参数量提升数倍，从而让模型拥有更大的容量和潜力。</li>
<li><strong>推理时</strong>：它通过“稀疏激活”（每个 token 只使用一小部分参数）的方式，使得一个巨大参数量的模型，能够以一个小的稠密模型的速度来进行推理，实现了<strong>“低成本，高性能”</strong>。</li>
</ul>
</li>
</ol>
<p>总而言之，MoE 是当前实现超大规模模型、并使其具备实用性的一项关键和前沿的技术。</p>
<hr />
<blockquote>
<p>大模型怎么知道该激活哪几个专家呢？尤其是训练的时候？还是说，路由网络的参数也是训练的一部分？</p>
</blockquote>
<p><strong>你的直觉完全正确：路由网络（Gating Network / Router）的参数本身就是模型的一部分，它需要和所有专家以及模型的其他部分一起被训练。</strong></p>
<p>路由网络本身通常是一个非常简单的神经网络，通常就是一个<strong>线性层</strong>。它的训练过程大致如下：</p>
<ol>
<li>
<p><strong>输入</strong>: 对于任意一个 token <code>x</code>（它已经过前面的注意力层处理），路由网络接收 <code>x</code>作为输入。</p>
</li>
<li>
<p><strong>计算“亲和度”分数</strong>: 路由网络内部有一个可训练的权重矩阵 <code>W_g</code>。它将输入 <code>x</code> 与这个权重矩阵相乘，得到一个logit向量，其维度等于专家的数量（比如，8个专家，就得到一个8维的logit向量）。</p>
</li>
</ol>
<pre class="arithmatex">\[\text{logits} = x \cdot W_g\]</pre>
<ol>
<li>
<p><strong>转换为概率/权重</strong>: 这个logit向量通过 <code>Softmax</code> 函数，转换成一个概率分布 <code>p</code>。向量 <code>p</code> 中的每一个值 <code>p_i</code> 代表了输入 token <code>x</code> 被分配给第 <code>i</code> 个专家的“权重”或“倾向性”。</p>
<pre class="arithmatex">\[p = \text{Softmax}(\text{logits})\]</pre>
</li>
<li>
<p><strong>做出路由决策 (Top-K Gating)</strong>:</p>
<ul>
<li>模型选择 <code>p</code> 中值最大的 K 个（比如K=2）。</li>
<li>被选中的这 K 个专家被<strong>激活</strong>。</li>
<li>这 K 个专家对应的概率值 <code>p_i</code> 将被用作后续结果加权的权重。</li>
</ul>
</li>
<li>
<p><strong>计算与反向传播</strong>:</p>
<ul>
<li>Token <code>x</code> 被送到这 K 个被激活的专家那里进行计算。</li>
<li>其他未被选中的专家则完全不参与计算。</li>
<li>在得到最终输出后，当计算模型的总损失（Loss）并进行反向传播时，<strong>梯度不仅会流向被激活的专家，让它们学习如何更好地处理这类 token，同时梯度也会流回路由网络，更新它的权重矩阵 <code>W_g</code></strong>。</li>
</ul>
</li>
</ol>
<p><strong>关键点</strong>：通过这个过程，路由网络 <code>W_g</code> 就会慢慢学会：<strong>“哦，当看到一个像 <code>x</code> 这样的 token（比如一个 Python 关键词），我应该把它分配给第3号和第7号专家（可能它们已经逐渐专精于代码），并且分配给第3号专家 70% 的权重，第7号专家 30% 的权重。”</strong></p>
<ul>
<li>一个巨大的挑战：负载不均衡 (Load Imbalance)</li>
</ul>
<p>如果单纯这样训练，会很容易出现一个严重问题：<strong>“马太效应”</strong>。</p>
<p>路由器可能会很快发现有几个专家特别“能干”（或者只是初始参数比较好），于是倾向于把所有类型的 token 都发给这几个“明星专家”。这会导致：
*   <strong>明星专家过载</strong>: 少数专家被过度训练，计算负载集中。
*   <strong>懒汉专家荒废</strong>: 其他专家很少接收到 token，得不到训练，其参数基本不变，逐渐“荒废”。</p>
<p>这违背了我们希望专家们“各有所长、分工合作”的初衷。</p>
<h5 id="load-balancing-loss">解决方案：负载均衡损失 (Load Balancing Loss)<a class="headerlink" href="#load-balancing-loss" title="Permanent link">⚓︎</a></h5>
<p>为了解决这个问题，研究者引入了一种巧妙的<strong>辅助损失函数 (Auxiliary Loss)</strong>，专门用来“惩罚”不均衡的路由行为。</p>
<p>这个损失函数的设计目标是<strong>鼓励路由器将 token 尽可能均匀地分配给所有专家</strong>。</p>
<p>它的计算方式大致是：</p>
<ol>
<li>在一个批次（Batch）的训练中，统计每个专家被分配到的 token 数量的比例。</li>
<li>如果这个分配非常不均匀（比如专家1处理了90%的token，其他7个专家只处理了剩下的10%），那么负载均衡损失就会变得非常大。</li>
<li>这个辅助损失会与模型的主要损失（比如预测下一个词的交叉熵损失）加在一起，共同指导模型的训练。</li>
</ol>
<p>$$ \text{Total Loss} = \text{Main Loss} + \alpha \times \text{Load Balancing Loss} $$
（其中 <code>α</code> 是一个超参数，用来控制这个辅助损失的重要性）</p>
<p>通过这种方式，路由器在训练时就陷入了一种“甜蜜的烦恼”：
*   一方面，它想把 token 送给最匹配的专家，以降低<strong>主要损失</strong>。
*   另一方面，它又必须顾及公平，尽量雨露均沾地把 token 分给所有专家，以降低<strong>辅助损失</strong>。</p>
<p>在这种权衡之下，模型最终会学到一个既高效又均衡的路由策略，促使不同的专家群体逐渐演化出处理不同领域知识的“专长”。</p>
<hr />
<p><strong>面试总结</strong></p>
<p><strong>面试官您好，关于MoE如何学习路由，我的理解是：</strong></p>
<ol>
<li><strong>路由网络本身是可训练的</strong>：它是一个小型神经网络（通常是线性层），其参数是整个大模型参数的一部分，会在训练中通过反向传播进行学习。</li>
<li><strong>学习机制</strong>：在训练时，对于每个token，路由网络会计算并输出一个分配给所有专家的“权重”或“概率”，并选择权重最高的几个专家激活。当模型根据最终预测结果计算损失并反向传播时，梯度也会更新路由网络的参数，从而让它学会“看到什么类型的token，就该分配给哪些专家”。</li>
<li><strong>核心挑战与解决方案</strong>：这个学习过程面临“负载不均衡”的挑战，即路由器可能倾向于只使用少数几个专家。解决方案是引入一个<strong>“负载均衡辅助损失函数”</strong>。这个额外的损失会惩罚不均衡的分配行为，迫使路由器在追求“专业对口”的同时，也要尽量“雨露均沾”，从而激励所有专家都得到充分训练，最终形成各有所长的分工体系。</li>
</ol>
</div>









  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="October 21, 2025 23:58:51 CST">October 21, 2025 23:58:51</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="February 10, 2025 17:47:24 CST">February 10, 2025 17:47:24</span>
  </span>

    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="贡献者">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:593302270@qq.com">xiaoxiao</a>
    </nav>
  </span>

    
    
  </aside>




              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2025 xiaoxiaoWayne
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/SmilingWayne" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/smilingwayne/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:xiaoxiaowayne@163.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.copy", "navigation.tabs", "search.suggest", "search.highlight", "search.share", "navigation.top", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../../javascripts/tablesort.js"></script>
      
        <script src="../../javascripts/extra.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://vercount.one/js"></script>
      
    
  </body>
</html>