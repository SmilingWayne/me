# 2049_ç»Ÿè®¡æœ€é«˜åˆ†çš„èŠ‚ç‚¹æ•°ç›®

<!-- æ‰€æœ‰æ–‡ä»¶åå¿…é¡»æ˜¯è¯¥é¢˜ç›®çš„è‹±æ–‡å -->

!!! note
    <!-- è¿™é‡Œè®°è½½è€ƒå¯Ÿçš„æ•°æ®ç»“æ„ã€ç®—æ³•ç­‰ -->
    DFS

- ğŸ”‘ğŸ”‘ éš¾åº¦ï¼š<span style = "color:gold; font-weight:bold">Medium</span>
<!-- <span style = "color:gold; font-weight:bold">Medium</span> ä¸­ç­‰ -->
<!-- <span style = "color:crisma; font-weight:bold">High</span> å›°éš¾ -->
<!-- <span style = "color:Green; font-weight:bold">Easy</span> ç®€å• -->

<!-- é¢˜ç›®ç®€ä»‹ -->

> ç»™ä½ ä¸€æ£µæ ¹èŠ‚ç‚¹ä¸º 0 çš„ äºŒå‰æ ‘ ï¼Œå®ƒæ€»å…±æœ‰ n ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ç¼–å·ä¸º 0 åˆ° n - 1 ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ parents è¡¨ç¤ºè¿™æ£µæ ‘ï¼Œå…¶ä¸­ parents[i] æ˜¯èŠ‚ç‚¹ i çš„çˆ¶èŠ‚ç‚¹ã€‚ç”±äºèŠ‚ç‚¹ 0 æ˜¯æ ¹ï¼Œæ‰€ä»¥ parents[0] == -1 ã€‚
> 
> ä¸€ä¸ªå­æ ‘çš„ å¤§å° ä¸ºè¿™ä¸ªå­æ ‘å†…èŠ‚ç‚¹çš„æ•°ç›®ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„ åˆ†æ•° ã€‚æ±‚å‡ºæŸä¸ªèŠ‚ç‚¹åˆ†æ•°çš„æ–¹æ³•æ˜¯ï¼Œå°†è¿™ä¸ªèŠ‚ç‚¹å’Œä¸å®ƒç›¸è¿çš„è¾¹å…¨éƒ¨ åˆ é™¤ ï¼Œå‰©ä½™éƒ¨åˆ†æ˜¯è‹¥å¹²ä¸ª éç©º å­æ ‘ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ åˆ†æ•° ä¸ºæ‰€æœ‰è¿™äº›å­æ ‘ å¤§å°çš„ä¹˜ç§¯ ã€‚
> 
> è¯·ä½ è¿”å›æœ‰ æœ€é«˜å¾—åˆ† èŠ‚ç‚¹çš„ æ•°ç›® ã€‚

![ç¤ºæ„å›¾](https://assets.leetcode.com/uploads/2021/10/03/example-1.png)


```
è¾“å…¥ï¼šparents = [-1,2,0,2,0]
è¾“å‡ºï¼š3
è§£é‡Šï¼š

- èŠ‚ç‚¹ 0 çš„åˆ†æ•°ä¸ºï¼š3 * 1 = 3
- èŠ‚ç‚¹ 1 çš„åˆ†æ•°ä¸ºï¼š4 = 4
- èŠ‚ç‚¹ 2 çš„åˆ†æ•°ä¸ºï¼š1 * 1 * 2 = 2
- èŠ‚ç‚¹ 3 çš„åˆ†æ•°ä¸ºï¼š4 = 4
- èŠ‚ç‚¹ 4 çš„åˆ†æ•°ä¸ºï¼š4 = 4
æœ€é«˜å¾—åˆ†ä¸º 4 ï¼Œæœ‰ä¸‰ä¸ªèŠ‚ç‚¹å¾—åˆ†ä¸º 4 ï¼ˆåˆ†åˆ«æ˜¯èŠ‚ç‚¹ 1ï¼Œ3 å’Œ 4 ï¼‰ã€‚

```

------

> è§£æ
> ä¸€é“ç»å…¸çš„æ¨¡æ‹Ÿé¢˜ï¼Œåªèƒ½é€šè¿‡å¯¹æ¯ä¸ªå¯èƒ½åˆ é™¤çš„æƒ…å†µä½œå‡ºè®¡ç®—ç„¶åæ±‚å‡ºæœ€å¤§å€¼
>  å¯¹äºDFSä¼šè‡ªåŠ¨æ±‚åˆ°æœ€åº•å±‚ï¼ŒæŠŠæ‰€æœ‰çš„å­æ ‘åˆ é™¤æƒ…å†µéƒ½è®¡ç®—å‡ºæ¥ï¼Œæ³¨æ„ç‰¹æ®Šæƒ…å†µæ˜¯ï¼šæ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œåˆ«çš„èŠ‚ç‚¹éƒ½ä¼šæœ‰çˆ¶èŠ‚ç‚¹ä¸Šå¾—åˆ°çš„é‚£ä¸ªéç©ºå­æ ‘
> å°†è®¡ç®—æœ€å¤§çš„ä¹˜ç§¯çš„è¿‡ç¨‹æ”¾åœ¨dfsä¸­è¿›è¡Œå®Œæˆ
> æ³¨æ„longçš„ä½¿ç”¨ å¯èƒ½ä¼šå¯¼è‡´countæ•°é‡è¶…è¿‡intèŒƒå›´ã€‚ã€å‘ã€‘


-------------

=== "C++"

    ```C++
    class Solution {
        public:
            int max_size = 0;
            long max_count = 1;
            int N = 0;
            vector<vector<int> > children;

            int dfs(int n){
                int size = N - 1;
                long temp_count = 1;
                for(auto i : children[n]){
                    int temp = dfs(i);
                    size -= temp;
                    temp_count *= temp;
                }
                if(n != 0){
                    temp_count *= size;
                }
                if(temp_count > max_count){
                    max_count = temp_count;
                    max_size = 1;
                }
                else if(temp_count ==  max_count){
                    max_size ++ ;
                }
                return N - size;

            }
            int countHighestScoreNodes(vector<int>& parents) {
                this->N = parents.size();
                this->children = vector<vector<int> >(N);
                for(int i = 0; i < N; i ++ ){
                    int p = parents[i];
                    if(p != -1){
                        children[p].emplace_back(i);
                    }
                }
                dfs(0);
                return max_size;
                
            }
        };

    ```