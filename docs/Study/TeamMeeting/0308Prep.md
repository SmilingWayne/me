# Truck and Drones

!!! note "调度模式"

    - 货车-无人机并行调度（Parallel）：

    ![](https://cdn.jsdelivr.net/gh/SmilingWayne/picsrepo/202403042208847.png)

    同时运行，但是互不干扰；

    - 货车-无人机协同调度（Collaborative）

    ![](https://cdn.jsdelivr.net/gh/SmilingWayne/picsrepo/202403042210041.png)

    飞机需要从车上起降，并且有相关运行约束；

![](https://cdn.jsdelivr.net/gh/SmilingWayne/picsrepo/202403042208847.png)

## FSTSP

$x_{ij}$ 卡车是否从i开往j点；
$y_{ijk}$ UAV是否从 $i$ 起飞服务 $j$ 地最后在 $k$ 降落在卡车上。
t_j 卡车到达j地的时间
$t_{j}^{'}$ UAV到达j地的时间

辅助决策变量： $p_{ij}$ 顾客 i 在j之前被服务，则为1，目的是约束飞机的飞行要是连续的。 p_{0j} = 1，约束起点必须是在所有顾客之前被访问。

每个飞机每次只能访问一个顾客。

辅助决策变量：$1 \leq u_i \leq c + 2$ 。限制子环路。不过，对于被无人机访问的节点，不参与计算，因为它不在卡车的环路中；

## PDSTSP

并行调度模式，UAV与卡车独立工作。该问题实际上是两个经典问题的结合。TSP + PMS(Parallel Machine Scheduling), 首先给所有需要卡车访问的地方TSP，确保可以访问，接下来给无人机访问的地方用并行机调度。

> Here, **each customer represents a ‘‘job’’ to be scheduled**, the ‘‘processing time’’ of each being given by the UAV’s round trip flight time to serve that customer from the distribution center.

论文的数值实验：10～20个客户（小），大部分可被无人机访问；大部分节点都在UAV的可达范围内。 problems were generated with either 10 or 20 customers, such that 80–90% of customers were UAV-eligible. The truck and UAV speeds were fixed at 25 miles/h,  the UAV having a flight endurance of 30 min. The depot location was selected as being either near the center of all customers, near the edge of the customer region, or at the origin (as with the FSTSP test problems). Customer locations were generated such that either 20%, 40%, 60%, or 80% of all customers were located within the UAV’s range of the depot.


## 并行机调度问题

!!! note "Parallel Machine Scheduling（PMS）并行机调度问题"
    存在多台相同或不同的机器可以同时处理任务。需要确定每个任务分配到哪台机器以及任务的处理顺序，以达到优化目标，如最小化完成所有任务的总时间或最大化产出等。

    列生成求解：论文：Xu, J., Nagi, R., 2013. Identical parallel machine scheduling to minimise makespan and total weighted completion time: a column generation approach. Int. J. Prod. Res. 51 (23–24), 7091–7104.

    目标函数：最小化加权完成时间的总和与总完工时间。这两个目标函数可以独立，也可以连在一起计算。PDTSP主要解决的问题是第二种场景，也就是仅仅最小化总的完工时间。
    
    > The objective function is to minimize the sum of the weighted completion time of every operation and weighted makespan. 

![](https://cdn.jsdelivr.net/gh/SmilingWayne/picsrepo/202403042210041.png)

N : 所有工作的集合；
Y ：机器的集合；
$w_j$ ：工作j的权重；
$F_j$ ：工作j的完成时间；
F：并行机排程问题的最大完成时间；
$B_j$ ： 所有编号小于 j 的工作的集合；

决策变量： 

$x_{iy}$, 工作 $i$ 是否分配给机器 $y$, $\forall i \in N, y \in Y$

$a_{ijy}$, 工作 $i$ 和 $j$ 是否被分配给机器 $y$ ；$\forall i \in B_j, j \in N, y \in Y$

![](https://cdn.jsdelivr.net/gh/SmilingWayne/picsrepo/202403050950579.png)

(1.2.3). 表示不同工作在机器上的分配情况；
(4). 每个任务只能被分到一个机器上；
(5). 计算总的完成时间；
(6). 约束每个任务的完成时间不早于最晚完成时间；

----------


主问题，是在许多个“排班方案”里选择一部分，从而达到最优。

- $s$： 列的序号；
- $S$：列的标号的集合；
- $F^s$ : 该列任务所需的时间；

决策变量： X_{iys} : 任务 i 是否被分给y机器，并采用s列的工序安排；如果是，则1；

Z_s: s列是否被选作一个解；


子问题，是生成一些“排班方案”


产生初始解：SWPT和LPT。


## 多车站、考虑时间窗口的TaD问题

- HAM A M. Integrated Scheduling of M-Truck ，M-Drone ，and M-Depot Constrained by Time-Window，Drop-Pickup，and M-Visit using Constraint Programming[J]. Transportation Research Part C：Emerging Technologies， 2018， 91 ： 1-14.

场景： 单depot，车必须TSP走，UAV只能运送一单货。意思是如果UAV取了货，下一站必须到目的地；如果UAV刚送完货，下一站要么回到车上，要么去取货点；无人机的充电（换电池）的时间可以被忽略；不同顾客有不同的送货优先级。

求解方法：约束规划问题；