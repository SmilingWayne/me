# 确定最优周期服务水平

产品的可获得性水平可以通过周期服务水平(CSL，Cycle Service Level)或者完成率来衡量。已知某产品的需求分布以及需求大于、小于该值的概率，已知供过于求的损失和供不应求的利润损失，要求确定使得销售利润最大化的订货量和周期服务水平。这个模型就是经典的“报童模型”。
> 复习：CSL的定义：所有客户的需求都得到满足的补货周期所占的比例；补货周期，就是连续两次补货交付的时间间隔。
供应链可以通过高水平的产品可获得性水平来提高响应能力并且吸引顾客，从而增加供应链的收入。但是较高的可获得性水平会要求保有大量的库存，这会导致供应链成本上升。所以供应链必须在产品的可获得性水平和库存成本之间取得平衡。

## 模型假设和符号指代：

1. 在销售季节只订一次货；
2. 单位产品零售价$p$,成本为$c$，残值是$s$；
3. $C_o$：单位产品的库存积压成本，$C_o = c - s$，是企业在销售季节结束时候每件未售出产品带来的经济损失；
4. $C_u$：单位产品的库存不足成本, $C_u = p - c$，是企业由于手头没有库存而丧失的每个销售机会造成的利润损失；
5. $O^{*}$：相应的最优订货量；
6. $CSL^{*}$：最优周期服务水平，是销售季节中需求量小于等于$O^{*}$的概率；在该水平下，额外采购一单位产品的边际贡献为0

## 推导

- 只有需求量大于$O^{*}$，额外的一单位商品才能售出。这种情况概率为$1 - CSL^{*}$。所以多订购一单位产品的预期收益$(1 - CSL^{*})(p - c)$ ；多订一单位的预期成本$CSL^{*}(c-s)$。 因此订货量从$O^{*}$增加到$O^{*} + 1$的预期边际贡献为$(1 - CSL^{*})(p - c) - CSL^{*}(c-s)$
- 由于最优周期服务水平下预期边际贡献一定等于0，可得$CSL^{*} = P(需求量 \leq O^{*}) = \frac{p - c}{p - s} = \frac{C_u}{C_o + C_u}$
- 这里的$CSL^{*}$ 称作临界分位点(Critical Fractile)。由此产生的最优订货量可以使得企业的利润实现最大化，如果销售季节的需求服从正态分布，均值$\mu$，标准差$\sigma$，那么最优订货量：

$$ O^{*} = F^{-1}(CSL^{*}, \mu, \sigma) = NORMINV(CSL^{*}, \mu, \sigma)$$

- 此时预期利润
- $(p-s)\mu F_S(\frac{O - \mu}{\sigma}) - (p-s)\sigma f_s(\frac{O - \mu}{\sigma}) - O(c-s)F(O,\mu, \sigma) + O(p-c)[1 - F(O, \mu, \sigma)]$

- 在Excel中表示即为：

$$Profit = (p-s)\mu NORMDIST(\frac{O - \mu}{\sigma}, 0, 0, 1) - $$

$$ (p-s)\sigma NORMDIST(\frac{O - \mu}{\sigma}, 0, 1, 0) - $$

$$ O(c-s)NORMDIST(O,\mu, \sigma, 1) + O(p-c)[1 - NORMDIST(O, \mu, \sigma, 1)]$$

- 当订购O产品时，
## 案例

- S Store正在考虑冬季销售多少套滑雪板。根据推测，需求服从正态分布，均值$\mu$ = 350，标准差$\sigma $ = 100。每个滑雪板的成本 c =100美元，零售价 p = 250 美元，销售季节结束时，所有未售出的滑雪板将以85美元的价格处理掉。假设在销售季节每个滑雪板的库存持有成本为5美元，商店经理想要最大化预期利润，应该订购多少滑雪板？

- 上述标准差、均值不变的情况下，如果商店经理决定为销售季节采购450个滑雪板，那么该决策下的预期库存积压和预期库存不足的数量是多少？
