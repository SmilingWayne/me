<h2>产能受限的工厂选址网络优化模型</h2>

**模型输入：**

$n$     = 潜在的工厂选址数量 / 产能；

$m$     = 市场或者需求点的数量；

$D_j$   = 市场$j$的年需求量；

$K_i$   = 工厂$i$的潜在产能；

$f_i$   = 维持工厂$i$开工的年固定成本；

$c_{ij}$ = 工厂$i$生产并运送一单位产品到市场$j$的成本（包括生产成本、库存成本、运输成本和关税）

**决策变量：**

$y_i$ = 1（如果工厂$i$开工，否则为0）
$x_{ij}$ = 从工厂$i$运到市场$j$的产品数量

那么问题可以表述为下面的整数规划：

$$ min \sum^{n}_{i = 1}{f_iy_i} + \sum^{n}_{i = 1}\sum^{m}_{j = 1}{c_{ij}x_{ij} } $$

**约束条件：**

$$\sum^{n}_{i = 1}x_{ij} = D_j, \quad j = 1,...m $$

$$\sum^{m}_{j = 1}x_{ij} \le K_iy_i, \quad i = 1,...n $$

$$y_i \in { 0, 1}, \quad i = 1,...n, x_{ij} \ge 0$$


<br>


<h2>重力选址模型</h2>

**模型输入：**
$x_n, \ y_n$: 某个市场或者供应源$n$的坐标

$F_n$:单位，这里可以是一件、一箱、一车、一吨产品在设施和市场供应源$n$之间每单位距离的运输成本

$D_n$：在设施和供应源$n$之间的运输数量

如果设施选定的地理位置是$(x,y)$，那么位于$(x,y)$的设施与供应源或者市场$n$之间的距离$d_n为$

$$d_n = \sqrt{(x - x_n)^2 + (y - y_n)^2} $$

总的运输成本$(TC)$是：

$$TC = \sum^{k}_{n = 1}{d_nD_nF_n}$$


**迭代法求解:**

**Step 1 .** 对于每个供应源和市场$n$，用TC公式计算 $d_n$ 获得工厂的位置$(x^{'},y^{'})$
**Step 2 .** 获得工厂的新的位置$(x^{'}, y^{'})$,其中


$$ x^{'} = \frac{\sum^{k}_{n = 1}\frac{D_nF_nx_n}{d_n}}{\sum^{k}_{n = 1}\frac{D_nF_n}{d_n}}$$ 

$$ y^{'} = \frac{\sum^{k}_{n = 1}\frac{D_nF_ny_n}{d_n}}{\sum^{k}_{n = 1}\frac{D_nF_n}{d_n}}$$ 

**Step 3 .** 如果新的位置$(x^{'},y^{'})$和$(x,y)$几乎相同，则停止，否则设置$(x,y)$为$(x^{'},y^{'})$，继续进行Step 1

--------------

<h2>网络优化模型</h2>

- 应用：运筹学、供应链管理、运营管理

在第2节为每一个工厂确定位置和产能配置之后，管理者还需要决定分配给每个工厂的市场。在分配时必须考虑到响应时间等方面的顾客服务约束。

所以本节虽然叫做“网络优化模型”，实际上是把两个子模型结合在一起，即<font color = "darkpink">需求分配模型</font>和我第一篇笔记提到的<font color = "darkpink">产能受限型工厂选址模型</font>。

<h3>1 需求分配模型</h3>

**模型输入:**

$n$ = 工厂选址的数量
$m$ = 市场或者需求地点的数量
$D_j$ = 市场$j$的年需求量
$K_i$ = 工厂$i$的产能
$c_{ij}$ = 在工厂$i$生产并运送单位数量的产品到市场$j$的成本(包括生产、库存和运输成本)

**决策变量：**

$x_{ij}$ = 从工厂$i$运输到市场$j$的产品数量

**决策目标**

$$  Min \ \sum^{n}_{i = 1}\sum^{m}_{j = 1}{c_{ij}x_{ij}}$$

**约束条件**

$$ \sum^{n}_{i = 1}{x_{ij}} = D_j, \ \ i = 1,...m$$

$$\sum^{m}_{j = 1}{x_{ij}} \leq K_i, \ \ i = 1,...m$$

--------------

<h2>单一供应源下产能受限型工厂选址模型</h2>

接前面的产能受限工厂选址模型，在某些情况中，企业希望把供应链网络设计成一个市场仅由一个工厂供货，这称为单一供应源(single source)。这一约束条件可以降低网络协调的复杂性，而且对每个设施的弹性要求更低。

这个模型实际上属于<font color = "darkpink">整数规划模型</font>。

**决策变量:**

$y_i$：如果工厂选址在地点$i$则为1，否则为0；

$x_{ij}$:如果市场$j$由工厂$i$供货，设置为1，否则为0；

**决策目标：**

$\qquad \qquad \qquad \qquad Min \sum_{n}^{i = 1}{f_iy_i} + \sum^{n}_{i = 1}\sum^{m}_{j = 1}{D_jc_{ij}x_{ij}}$

**约束条件：**

$\qquad \qquad \qquad \qquad \sum^{n}_{i = 1}{x_{ij}} = 1, \ \ j = 1,...m$

$\qquad \qquad \qquad \qquad \sum_{m}^{j = 1}{D_jx_{ij}} \leq K_iy_i, \ i = 1,....,n$

$\qquad \qquad \qquad \qquad  x_{ij},y_i \in \{0, 1\}$
